var Lm=Object.defineProperty,Vm=Object.defineProperties;var Bm=Object.getOwnPropertyDescriptors;var Xc=Object.getOwnPropertySymbols;var jm=Object.prototype.hasOwnProperty,Hm=Object.prototype.propertyIsEnumerable;var eu=(n,e,t)=>e in n?Lm(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})jm.call(e,t)&&eu(n,t,e[t]);if(Xc)for(var t of Xc(e))Hm.call(e,t)&&eu(n,t,e[t]);return n},X=(n,e)=>Vm(n,Bm(e));var hs=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var gs=null;var ps=1,tu=Symbol("SIGNAL");function N(n){let e=gs;return gs=n,e}function nu(){return gs}var ms={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $m(n){if(!(Cs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ps)){if(!n.producerMustRecompute(n)&&!Ds(n)){n.dirty=!1,n.lastCleanEpoch=ps;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ps}}function ys(n){return n&&(n.nextProducerIndex=0),N(n)}function ru(n,e){if(N(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cs(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ws(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ds(n){Es(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||($m(t),r!==t.version))return!0}return!1}function vs(n){if(Es(n),Cs(n))for(let e=0;e<n.producerNode.length;e++)ws(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ws(n,e){if(zm(n),n.liveConsumerNode.length===1&&Um(n))for(let r=0;r<n.producerNode.length;r++)ws(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Es(i),i.producerIndexOfThis[r]=e}}function Cs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Es(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function zm(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Um(n){return n.producerNode!==void 0}function qm(){throw new Error}var Wm=qm;function iu(n){Wm=n}function pe(n){return typeof n=="function"}function di(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fi=di(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ur(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var oe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof fi?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ou(o)}catch(s){e=e??[],s instanceof fi?e=[...e,...s.errors]:e.push(s)}}if(e)throw new fi(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ou(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ur(t,e)}remove(e){let{_finalizers:t}=this;t&&ur(t,e),e instanceof n&&e._removeParent(this)}};oe.EMPTY=(()=>{let n=new oe;return n.closed=!0,n})();var bs=oe.EMPTY;function hi(n){return n instanceof oe||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function ou(n){pe(n)?n():n.unsubscribe()}var Le={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xn={setTimeout(n,e,...t){let{delegate:r}=xn;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xn;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function su(n){xn.setTimeout(()=>{let{onUnhandledError:e}=Le;if(e)e(n);else throw n})}function Is(){}var au=Ms("C",void 0,void 0);function lu(n){return Ms("E",void 0,n)}function cu(n){return Ms("N",n,void 0)}function Ms(n,e,t){return{kind:n,value:e,error:t}}var jt=null;function Nn(n){if(Le.useDeprecatedSynchronousErrorHandling){let e=!jt;if(e&&(jt={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=jt;if(jt=null,t)throw r}}else n()}function uu(n){Le.useDeprecatedSynchronousErrorHandling&&jt&&(jt.errorThrown=!0,jt.error=n)}var Ht=class extends oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hi(e)&&e.add(this)):this.destination=Jm}static create(e,t,r){return new Tn(e,t,r)}next(e){this.isStopped?xs(cu(e),this):this._next(e)}error(e){this.isStopped?xs(lu(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xs(au,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Gm=Function.prototype.bind;function Ss(n,e){return Gm.call(n,e)}var Ns=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pi(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pi(r)}else pi(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pi(t)}}},Tn=class extends Ht{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Le.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ss(e.next,o),error:e.error&&Ss(e.error,o),complete:e.complete&&Ss(e.complete,o)}):i=e}this.destination=new Ns(i)}};function pi(n){Le.useDeprecatedSynchronousErrorHandling?uu(n):su(n)}function Zm(n){throw n}function xs(n,e){let{onStoppedNotification:t}=Le;t&&xn.setTimeout(()=>t(n,e))}var Jm={closed:!0,next:Is,error:Zm,complete:Is};var du=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fu(n){return n}function hu(n){return n.length===0?fu:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ts=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Ym(t)?t:new Tn(t,r,i);return Nn(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=pu(r),new r((i,o)=>{let s=new Tn({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[du](){return this}pipe(...t){return hu(t)(this)}toPromise(t){return t=pu(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pu(n){var e;return(e=n??Le.Promise)!==null&&e!==void 0?e:Promise}function Km(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function Ym(n){return n&&n instanceof Ht||Km(n)&&hi(n)}function Qm(n){return pe(n?.lift)}function gu(n){return e=>{if(Qm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function mu(n,e,t,r,i){return new As(n,e,t,r,i)}var As=class extends Ht{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var yu=di(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var It=(()=>{class n extends Ts{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gi(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yu}next(t){Nn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Nn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Nn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?bs:(this.currentObservers=null,o.push(t),new oe(()=>{this.currentObservers=null,ur(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Ts;return t.source=this,t}}return n.create=(e,t)=>new gi(e,t),n})(),gi=class extends It{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:bs}};var dr=class extends It{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function ks(n,e){return gu((t,r)=>{let i=0;t.subscribe(mu(r,o=>{r.next(n.call(e,o,i++))}))})}var Xm="https://g.co/ng/security#xss",x=class extends Error{constructor(e,t){super(La(e,t)),this.code=e}};function La(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Gi(n){return{toString:n}.toString()}function L(n){for(let e in n)if(n[e]===L)return e;throw Error("Could not find renamed property on target object.")}function ey(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ne(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ne).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qs(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var ty=L({__forward_ref__:L});function Zi(n){return n.__forward_ref__=Zi,n.toString=function(){return Ne(this())},n}function se(n){return Yu(n)?n():n}function Yu(n){return typeof n=="function"&&n.hasOwnProperty(ty)&&n.__forward_ref__===Zi}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Va(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ba(n){return Du(n,Qu)||Du(n,Xu)}function Du(n,e){return n.hasOwnProperty(e)?n[e]:null}function ny(n){let e=n&&(n[Qu]||n[Xu]);return e||null}function vu(n){return n&&(n.hasOwnProperty(wu)||n.hasOwnProperty(ry))?n[wu]:null}var Qu=L({\u0275prov:L}),wu=L({\u0275inj:L}),Xu=L({ngInjectableDef:L}),ry=L({ngInjectorDef:L}),R=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ed(n){return n&&!!n.\u0275providers}var iy=L({\u0275cmp:L}),oy=L({\u0275dir:L}),sy=L({\u0275pipe:L});var Mi=L({\u0275fac:L}),pr=L({__NG_ELEMENT_ID__:L}),Cu=L({__NG_ENV_ID__:L});function td(n){return typeof n=="string"?n:n==null?"":String(n)}function ay(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():td(n)}function ly(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new x(-200,n)}function ja(n,e){throw new x(-201,!1)}var I=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(I||{}),Ws;function nd(){return Ws}function We(n){let e=Ws;return Ws=n,e}function rd(n,e,t){let r=Ba(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&I.Optional)return null;if(e!==void 0)return e;ja(n,"Injector")}var cy={},gr=cy,uy="__NG_DI_FLAG__",Si="ngTempTokenPath",dy="ngTokenPath",fy=/\n/gm,hy="\u0275",Eu="__source",Rn;function py(){return Rn}function An(n){let e=Rn;return Rn=n,e}function gy(n,e=I.Default){if(Rn===void 0)throw new x(-203,!1);return Rn===null?rd(n,void 0,e):Rn.get(n,e&I.Optional?null:void 0,e)}function A(n,e=I.Default){return(nd()||gy)(se(n),e)}function O(n,e=I.Default){return A(n,Ji(e))}function Ji(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Gs(n){let e=[];for(let t=0;t<n.length;t++){let r=se(n[t]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,o=I.Default;for(let s=0;s<r.length;s++){let a=r[s],l=my(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(A(i,o))}else e.push(A(r))}return e}function my(n){return n[uy]}function yy(n,e,t,r){let i=n[Si];throw e[Eu]&&i.unshift(e[Eu]),n.message=Dy(`
`+n.message,i,t,r),n[dy]=i,n[Si]=null,n}function Dy(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hy?n.slice(2):n;let i=Ne(e);if(Array.isArray(e))i=e.map(Ne).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ne(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(fy,`
  `)}`}function Fn(n,e){let t=n.hasOwnProperty(Mi);return t?n[Mi]:null}function vy(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function wy(n){return n.flat(Number.POSITIVE_INFINITY)}function Ha(n,e){n.forEach(t=>Array.isArray(t)?Ha(t,e):e(t))}function id(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xi(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Cy(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ey(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function $a(n,e,t){let r=Er(n,e);return r>=0?n[r|1]=t:(r=~r,Ey(n,r,e,t)),r}function Os(n,e){let t=Er(n,e);if(t>=0)return n[t|1]}function Er(n,e){return by(n,e,1)}function by(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ln={},ge=[],mr=new R(""),od=new R("",-1),sd=new R(""),Ni=class{get(e,t=gr){if(t===gr){let r=new Error(`NullInjectorError: No provider for ${Ne(e)}!`);throw r.name="NullInjectorError",r}return t}},ad=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ad||{}),Ke=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ke||{}),St=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(St||{});function Iy(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Zs(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Sy(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function My(n){return n===3||n===4||n===6}function Sy(n){return n.charCodeAt(0)===64}function yr(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?bu(n,t,i,null,e[++r]):bu(n,t,i,null,null))}}return n}function bu(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var ld="ng-template";function xy(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Iy(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(za(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function za(n){return n.type===4&&n.value!==ld}function Ny(n,e,t){let r=n.type===4&&!t?ld:n.value;return e===r}function Ty(n,e,t){let r=4,i=n.attrs,o=i!==null?Oy(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Ve(r)&&!Ve(l))return!1;if(s&&Ve(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Ny(n,l,t)||l===""&&e.length===1){if(Ve(r))return!1;s=!0}}else if(r&8){if(i===null||!xy(n,i,l,t)){if(Ve(r))return!1;s=!0}}else{let c=e[++a],u=Ay(l,i,za(n),t);if(u===-1){if(Ve(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(Ve(r))return!1;s=!0}}}}return Ve(r)||s}function Ve(n){return(n&1)===0}function Ay(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _y(e,n)}function cd(n,e,t=!1){for(let r=0;r<e.length;r++)if(Ty(n,e[r],t))return!0;return!1}function ky(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function Oy(n){for(let e=0;e<n.length;e++){let t=n[e];if(My(t))return e}return n.length}function _y(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Ry(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Iu(n,e){return n?":not("+e.trim()+")":e}function Py(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ve(s)&&(e+=Iu(o,i),i=""),r=s,o=o||!Ve(r);t++}return i!==""&&(e+=Iu(o,i)),e}function Fy(n){return n.map(Py).join(",")}function Ly(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ve(i))break;i=o}r++}return{attrs:e,classes:t}}function me(n){return Gi(()=>{let e=fd(n),t=X(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ad.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ke.Emulated,styles:n.styles||ge,_:null,schemas:n.schemas||null,tView:null,id:""});hd(t);let r=n.dependencies;return t.directiveDefs=Su(r,!1),t.pipeDefs=Su(r,!0),t.id=Hy(t),t})}function Vy(n){return Vn(n)||ud(n)}function By(n){return n!==null}function Ua(n){return Gi(()=>({type:n.type,bootstrap:n.bootstrap||ge,declarations:n.declarations||ge,imports:n.imports||ge,exports:n.exports||ge,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Mu(n,e){if(n==null)return Ln;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=St.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==St.None?[r,a]:r,e[o]=s):t[o]=r}return t}function He(n){return Gi(()=>{let e=fd(n);return hd(e),e})}function Vn(n){return n[iy]||null}function ud(n){return n[oy]||null}function dd(n){return n[sy]||null}function jy(n){let e=Vn(n)||ud(n)||dd(n);return e!==null?e.standalone:!1}function fd(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ln,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ge,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mu(n.inputs,e),outputs:Mu(n.outputs),debugInfo:null}}function hd(n){n.features?.forEach(e=>e(n))}function Su(n,e){if(!n)return null;let t=e?dd:Vy;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(By)}function Hy(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $y(...n){return{\u0275providers:pd(!0,n),\u0275fromNgModule:!0}}function pd(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ha(e,s=>{let a=s;Js(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gd(i,o),t}function gd(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];qa(i,o=>{e(o,r)})}}function Js(n,e,t,r){if(n=se(n),!n)return!1;let i=null,o=vu(n),s=!o&&Vn(n);if(!o&&!s){let l=n.ngModule;if(o=vu(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Js(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Ha(o.imports,u=>{Js(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&gd(c,e)}if(!a){let c=Fn(i)||(()=>new i);e({provide:i,useFactory:c,deps:ge},i),e({provide:sd,useValue:i,multi:!0},i),e({provide:mr,useValue:()=>A(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;qa(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function qa(n,e){for(let t of n)ed(t)&&(t=t.\u0275providers),Array.isArray(t)?qa(t,e):e(t)}var zy=L({provide:String,useValue:L});function md(n){return n!==null&&typeof n=="object"&&zy in n}function Uy(n){return!!(n&&n.useExisting)}function qy(n){return!!(n&&n.useFactory)}function Bn(n){return typeof n=="function"}function Wy(n){return!!n.useClass}var Ki=new R(""),vi={},Gy={},_s;function Wa(){return _s===void 0&&(_s=new Ni),_s}var xt=class{},Ti=class extends xt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ys(e,s=>this.processProvider(s)),this.records.set(od,kn(void 0,this)),i.has("environment")&&this.records.set(xt,kn(void 0,this));let o=this.records.get(Ki);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sd,ge,I.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=N(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),N(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=An(this),r=We(void 0),i;try{return e()}finally{An(t),We(r)}}get(e,t=gr,r=I.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Cu))return e[Cu](this);r=Ji(r);let i,o=An(this),s=We(void 0);try{if(!(r&I.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Qy(e)&&Ba(e);c&&this.injectableDefInScope(c)?l=kn(Ks(e),vi):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&I.Self?Wa():this.parent;return t=r&I.Optional&&t===gr?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Si]=a[Si]||[]).unshift(Ne(e)),o)throw a;return yy(a,e,"R3InjectorError",this.source)}else throw a}finally{We(s),An(o)}}resolveInjectorInitializers(){let e=N(null),t=An(this),r=We(void 0),i;try{let o=this.get(mr,ge,I.Self);for(let s of o)s()}finally{An(t),We(r),N(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ne(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){e=se(e);let t=Bn(e)?e:se(e&&e.provide),r=Jy(e);if(!Bn(e)&&e.multi===!0){let i=this.records.get(t);i||(i=kn(void 0,vi,!0),i.factory=()=>Gs(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=N(null);try{return t.value===vi&&(t.value=Gy,t.value=t.factory()),typeof t.value=="object"&&t.value&&Yy(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{N(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=se(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ks(n){let e=Ba(n),t=e!==null?e.factory:Fn(n);if(t!==null)return t;if(n instanceof R)throw new x(204,!1);if(n instanceof Function)return Zy(n);throw new x(204,!1)}function Zy(n){if(n.length>0)throw new x(204,!1);let t=ny(n);return t!==null?()=>t.factory(n):()=>new n}function Jy(n){if(md(n))return kn(void 0,n.useValue);{let e=yd(n);return kn(e,vi)}}function yd(n,e,t){let r;if(Bn(n)){let i=se(n);return Fn(i)||Ks(i)}else if(md(n))r=()=>se(n.useValue);else if(qy(n))r=()=>n.useFactory(...Gs(n.deps||[]));else if(Uy(n))r=()=>A(se(n.useExisting));else{let i=se(n&&(n.useClass||n.provide));if(Ky(n))r=()=>new i(...Gs(n.deps));else return Fn(i)||Ks(i)}return r}function kn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Ky(n){return!!n.deps}function Yy(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Qy(n){return typeof n=="function"||typeof n=="object"&&n instanceof R}function Ys(n,e){for(let t of n)Array.isArray(t)?Ys(t,e):t&&ed(t)?Ys(t.\u0275providers,e):e(t)}function Xy(){return nd()!==void 0||py()!=null}function eD(n){return typeof n=="function"}var dt=0,b=1,C=2,ee=3,je=4,ye=5,Dr=6,Ai=7,st=8,jn=9,at=10,Z=11,vr=12,xu=13,br=14,Ae=15,Ut=16,On=17,lt=18,Yi=19,Dd=20,Mt=21,Rs=22,Te=23,Ye=25,vd=1;var qt=7,ki=8,Hn=9,be=10,Oi=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Oi||{});function $t(n){return Array.isArray(n)&&typeof n[vd]=="object"}function ft(n){return Array.isArray(n)&&n[vd]===!0}function wd(n){return(n.flags&4)!==0}function Qi(n){return n.componentOffset>-1}function Ga(n){return(n.flags&1)===1}function Nt(n){return!!n.template}function Qs(n){return(n[C]&512)!==0}var Xs=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Cd(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ed(){return bd}function bd(n){return n.type.prototype.ngOnChanges&&(n.setInput=nD),tD}Ed.ngInherit=!0;function tD(){let n=Md(this),e=n?.current;if(e){let t=n.previous;if(t===Ln)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nD(n,e,t,r,i){let o=this.declaredInputs[r],s=Md(n)||rD(n,{previous:Ln,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new Xs(c&&c.currentValue,t,l===Ln),Cd(n,e,i,t)}var Id="__ngSimpleChanges__";function Md(n){return n[Id]||null}function rD(n,e){return n[Id]=e}var Nu=null;var Ge=function(n,e,t){Nu?.(n,e,t)},iD="svg",oD="math";function Qe(n){for(;Array.isArray(n);)n=n[dt];return n}function Sd(n,e){return Qe(e[n])}function $e(n,e){return Qe(e[n.index])}function xd(n,e){return n.data[e]}function tn(n,e){let t=e[n];return $t(t)?t:t[dt]}function sD(n){return(n[C]&4)===4}function Za(n){return(n[C]&128)===128}function aD(n){return ft(n[ee])}function _i(n,e){return e==null?null:n[e]}function Nd(n){n[On]=0}function Td(n){n[C]&1024||(n[C]|=1024,Za(n)&&eo(n))}function Xi(n){return!!(n[C]&9216||n[Te]?.dirty)}function ea(n){n[at].changeDetectionScheduler?.notify(8),n[C]&64&&(n[C]|=1024),Xi(n)&&eo(n)}function eo(n){n[at].changeDetectionScheduler?.notify(0);let e=Wt(n);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!Za(e)));)e=Wt(e)}function Ad(n,e){if((n[C]&256)===256)throw new x(911,!1);n[Mt]===null&&(n[Mt]=[]),n[Mt].push(e)}function lD(n,e){if(n[Mt]===null)return;let t=n[Mt].indexOf(e);t!==-1&&n[Mt].splice(t,1)}function Wt(n){let e=n[ee];return ft(e)?e[ee]:e}var S={lFrame:zd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kd=!1;function cD(){return S.lFrame.elementDepthCount}function uD(){S.lFrame.elementDepthCount++}function dD(){S.lFrame.elementDepthCount--}function Od(){return S.bindingsEnabled}function _d(){return S.skipHydrationRootTNode!==null}function fD(n){return S.skipHydrationRootTNode===n}function hD(){S.skipHydrationRootTNode=null}function F(){return S.lFrame.lView}function ae(){return S.lFrame.tView}function Ie(){let n=Rd();for(;n!==null&&n.type===64;)n=n.parent;return n}function Rd(){return S.lFrame.currentTNode}function pD(){let n=S.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ir(n,e){let t=S.lFrame;t.currentTNode=n,t.isParent=e}function Pd(){return S.lFrame.isParent}function Fd(){S.lFrame.isParent=!1}function Ld(){return kd}function Tu(n){kd=n}function gD(n){return S.lFrame.bindingIndex=n}function Vd(){return S.lFrame.bindingIndex++}function Bd(n){let e=S.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mD(){return S.lFrame.inI18n}function yD(n,e){let t=S.lFrame;t.bindingIndex=t.bindingRootIndex=n,ta(e)}function DD(){return S.lFrame.currentDirectiveIndex}function ta(n){S.lFrame.currentDirectiveIndex=n}function vD(n){let e=S.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jd(){return S.lFrame.currentQueryIndex}function Ja(n){S.lFrame.currentQueryIndex=n}function wD(n){let e=n[b];return e.type===2?e.declTNode:e.type===1?n[ye]:null}function Hd(n,e,t){if(t&I.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&I.Host);)if(i=wD(o),i===null||(o=o[br],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=S.lFrame=$d();return r.currentTNode=e,r.lView=n,!0}function Ka(n){let e=$d(),t=n[b];S.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $d(){let n=S.lFrame,e=n===null?null:n.child;return e===null?zd(n):e}function zd(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Ud(){let n=S.lFrame;return S.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var qd=Ud;function Ya(){let n=Ud();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nn(){return S.lFrame.selectedIndex}function Gt(n){S.lFrame.selectedIndex=n}function CD(){let n=S.lFrame;return xd(n.tView,n.selectedIndex)}function ED(){return S.lFrame.currentNamespace}var Wd=!0;function Qa(){return Wd}function Xa(n){Wd=n}function bD(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=bd(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function el(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function wi(n,e,t){Gd(n,e,3,t)}function Ci(n,e,t,r){(n[C]&3)===t&&Gd(n,e,t,r)}function Ps(n,e){let t=n[C];(t&3)===e&&(t&=16383,t+=1,n[C]=t)}function Gd(n,e,t,r){let i=r!==void 0?n[On]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[On]+=65536),(a<o||o==-1)&&(ID(n,t,e,l),n[On]=(n[On]&4294901760)+l+2),l++}function Au(n,e){Ge(4,n,e);let t=N(null);try{e.call(n)}finally{N(t),Ge(5,n,e)}}function ID(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[C]>>14<n[On]>>16&&(n[C]&3)===e&&(n[C]+=16384,Au(a,o)):Au(a,o)}var Pn=-1,Zt=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function MD(n){return n instanceof Zt}function SD(n){return(n.flags&8)!==0}function xD(n){return(n.flags&16)!==0}var Fs={},na=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Ji(r);let i=this.injector.get(e,Fs,r);return i!==Fs||t===Fs?i:this.parentInjector.get(e,t,r)}};function Zd(n){return n!==Pn}function Ri(n){return n&32767}function ND(n){return n>>16}function Pi(n,e){let t=ND(n),r=e;for(;t>0;)r=r[br],t--;return r}var ra=!0;function ku(n){let e=ra;return ra=n,e}var TD=256,Jd=TD-1,Kd=5,AD=0,Ze={};function kD(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(pr)&&(r=t[pr]),r==null&&(r=t[pr]=AD++);let i=r&Jd,o=1<<i;e.data[n+(i>>Kd)]|=o}function Fi(n,e){let t=Yd(n,e);if(t!==-1)return t;let r=e[b];r.firstCreatePass&&(n.injectorIndex=e.length,Ls(r.data,n),Ls(e,null),Ls(r.blueprint,null));let i=tl(n,e),o=n.injectorIndex;if(Zd(i)){let s=Ri(i),a=Pi(i,e),l=a[b].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Ls(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Yd(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tl(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=nf(i),r===null)return Pn;if(t++,i=i[br],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Pn}function ia(n,e,t){kD(n,e,t)}function Qd(n,e,t){if(t&I.Optional||n!==void 0)return n;ja(e,"NodeInjector")}function Xd(n,e,t,r){if(t&I.Optional&&r===void 0&&(r=null),!(t&(I.Self|I.Host))){let i=n[jn],o=We(void 0);try{return i?i.get(e,r,t&I.Optional):rd(e,r,t&I.Optional)}finally{We(o)}}return Qd(r,e,t)}function ef(n,e,t,r=I.Default,i){if(n!==null){if(e[C]&2048&&!(r&I.Self)){let s=PD(n,e,t,r,Ze);if(s!==Ze)return s}let o=tf(n,e,t,r,Ze);if(o!==Ze)return o}return Xd(e,t,r,i)}function tf(n,e,t,r,i){let o=_D(t);if(typeof o=="function"){if(!Hd(e,n,r))return r&I.Host?Qd(i,t,r):Xd(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&I.Optional))ja(t);else return s}finally{qd()}}else if(typeof o=="number"){let s=null,a=Yd(n,e),l=Pn,c=r&I.Host?e[Ae][ye]:null;for((a===-1||r&I.SkipSelf)&&(l=a===-1?tl(n,e):e[a+8],l===Pn||!_u(r,!1)?a=-1:(s=e[b],a=Ri(l),e=Pi(l,e)));a!==-1;){let u=e[b];if(Ou(o,a,u.data)){let d=OD(a,e,t,s,r,c);if(d!==Ze)return d}l=e[a+8],l!==Pn&&_u(r,e[b].data[a+8]===c)&&Ou(o,a,e)?(s=u,a=Ri(l),e=Pi(l,e)):a=-1}}return i}function OD(n,e,t,r,i,o){let s=e[b],a=s.data[n+8],l=r==null?Qi(a)&&ra:r!=s&&(a.type&3)!==0,c=i&I.Host&&o===a,u=Ei(a,s,t,l,c);return u!==null?Jt(e,s,u,a):Ze}function Ei(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:c;for(let h=d;h<f;h++){let p=s[h];if(h<l&&t===p||h>=l&&p.type===t)return h}if(i){let h=s[l];if(h&&Nt(h)&&h.type===t)return l}return null}function Jt(n,e,t,r){let i=n[t],o=e.data;if(MD(i)){let s=i;s.resolving&&ly(ay(o[t]));let a=ku(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?We(s.injectImpl):null,u=Hd(n,r,I.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&bD(t,o[t],e)}finally{c!==null&&We(c),ku(a),s.resolving=!1,qd()}}return i}function _D(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(pr)?n[pr]:void 0;return typeof e=="number"?e>=0?e&Jd:RD:e}function Ou(n,e,t){let r=1<<n;return!!(t[e+(n>>Kd)]&r)}function _u(n,e){return!(n&I.Self)&&!(n&I.Host&&e)}var zt=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ef(this._tNode,this._lView,e,Ji(r),t)}};function RD(){return new zt(Ie(),F())}function Xe(n){return Gi(()=>{let e=n.prototype.constructor,t=e[Mi]||oa(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Mi]||oa(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function oa(n){return Yu(n)?()=>{let e=oa(se(n));return e&&e()}:Fn(n)}function PD(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[C]&2048&&!(s[C]&512);){let a=tf(o,s,t,r|I.Self,Ze);if(a!==Ze)return a;let l=o.parent;if(!l){let c=s[Dd];if(c){let u=c.get(t,Ze,r);if(u!==Ze)return u}l=nf(s),s=s[br]}o=l}return i}function nf(n){let e=n[b],t=e.type;return t===2?e.declTNode:t===1?n[ye]:null}function Ru(n,e=null,t=null,r){let i=FD(n,e,t,r);return i.resolveInjectorInitializers(),i}function FD(n,e=null,t=null,r,i=new Set){let o=[t||ge,$y(n)];return r=r||(typeof n=="object"?void 0:Ne(n)),new Ti(o,e||Wa(),r||null,i)}var Kt=class n{static{this.THROW_IF_NOT_FOUND=gr}static{this.NULL=new Ni}static create(e,t){if(Array.isArray(e))return Ru({name:""},t,e,"");{let r=e.name??"";return Ru({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=V({token:n,providedIn:"any",factory:()=>A(od)})}static{this.__NG_ELEMENT_ID__=-1}};var LD=new R("");LD.__NG_ELEMENT_ID__=n=>{let e=Ie();if(e===null)throw new x(204,!1);if(e.type&2)return e.value;if(n&I.Optional)return null;throw new x(204,!1)};var VD="ngOriginalError";function Vs(n){return n[VD]}var rf=!0,of=(()=>{class n{static{this.__NG_ELEMENT_ID__=BD}static{this.__NG_ENV_ID__=t=>t}}return n})(),sa=class extends of{constructor(e){super(),this._lView=e}onDestroy(e){return Ad(this._lView,e),()=>lD(this._lView,e)}};function BD(){return new sa(F())}var to=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}}return n})();var aa=class extends It{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Xy()&&(this.destroyRef=O(of,{optional:!0})??void 0,this.pendingTasks=O(to,{optional:!0})??void 0)}emit(e){let t=N(null);try{super.next(e)}finally{N(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof oe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Je=aa;function Li(...n){}function sf(n){let e,t;function r(){n=Li;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Pu(n){return queueMicrotask(()=>n()),()=>{n=Li}}var nl="isAngularZone",Vi=nl+"_ID",jD=0,q=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rf}=e;if(typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,zD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(nl)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HD,Li,Li);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},HD={};function rl(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $D(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){sf(()=>{n.callbackScheduled=!1,la(n),n.isCheckStableRunning=!0,rl(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),la(n)}function zD(n){let e=()=>{$D(n)},t=jD++;n._inner=n._inner.fork({name:"angular",properties:{[nl]:!0,[Vi]:t,[Vi+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(UD(l))return r.invokeTask(o,s,a,l);try{return Fu(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Lu(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return Fu(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!qD(l)&&e(),Lu(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,la(n),rl(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function la(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Fu(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Lu(n){n._nesting--,rl(n)}var ca=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function UD(n){return af(n,"__ignore_ng_zone__")}function qD(n){return af(n,"__scheduler_tick__")}function af(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ct=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vs(e);for(;t&&Vs(t);)t=Vs(t);return t||null}},WD=new R("",{providedIn:"root",factory:()=>{let n=O(q),e=O(ct);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function GD(){return Wn(Ie(),F())}function Wn(n,e){return new De($e(n,e))}var De=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=GD}}return n})();function ZD(n){return n instanceof De?n.nativeElement:n}function JD(){return this._results[Symbol.iterator]()}var ua=class n{get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=JD)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=wy(e);(this._changesDetected=!vy(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function lf(n){return(n.flags&128)===128}var cf=new Map,KD=0;function YD(){return KD++}function QD(n){cf.set(n[Yi],n)}function da(n){cf.delete(n[Yi])}var Vu="__ngContext__";function Yt(n,e){$t(e)?(n[Vu]=e[Yi],QD(e)):n[Vu]=e}function uf(n){return ff(n[vr])}function df(n){return ff(n[je])}function ff(n){for(;n!==null&&!ft(n);)n=n[je];return n}var fa;function hf(n){fa=n}function XD(){if(fa!==void 0)return fa;if(typeof document<"u")return document;throw new x(210,!1)}var il=new R("",{providedIn:"root",factory:()=>ev}),ev="ng",ol=new R(""),Gn=new R("",{providedIn:"platform",factory:()=>"unknown"});var sl=new R("",{providedIn:"root",factory:()=>XD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tv="h",nv="b";var rv=()=>null;function al(n,e,t=!1){return rv(n,e,t)}var pf=!1,iv=new R("",{providedIn:"root",factory:()=>pf});var ha=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xm})`}};function no(n){return n instanceof ha?n.changingThisBreaksApplicationSecurity:n}var ut=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ut||{}),ov;function ll(n,e){return ov(n,e)}function _n(n,e,t,r,i){if(r!=null){let o,s=!1;ft(r)?o=r:$t(r)&&(s=!0,r=r[dt]);let a=Qe(r);n===0&&t!==null?i==null?wf(e,t,a):Bi(e,t,a,i||null,!0):n===1&&t!==null?Bi(e,t,a,i||null,!0):n===2?Dv(e,a,s):n===3&&e.destroyNode(a),o!=null&&wv(e,n,o,t,i)}}function sv(n,e){return n.createText(e)}function av(n,e,t){n.setValue(e,t)}function gf(n,e,t){return n.createElement(e,t)}function lv(n,e){mf(n,e),e[dt]=null,e[ye]=null}function cv(n,e,t,r,i,o){r[dt]=i,r[ye]=e,ro(n,r,t,1,i,o)}function mf(n,e){e[at].changeDetectionScheduler?.notify(9),ro(n,e,e[Z],2,null,null)}function uv(n){let e=n[vr];if(!e)return Bs(n[b],n);for(;e;){let t=null;if($t(e))t=e[vr];else{let r=e[be];r&&(t=r)}if(!t){for(;e&&!e[je]&&e!==n;)$t(e)&&Bs(e[b],e),e=e[ee];e===null&&(e=n),$t(e)&&Bs(e[b],e),t=e&&e[je]}e=t}}function dv(n,e,t,r){let i=be+r,o=t.length;r>0&&(t[i-1][je]=e),r<o-be?(e[je]=t[i],id(t,be+r,e)):(t.push(e),e[je]=null),e[ee]=t;let s=e[Ut];s!==null&&t!==s&&yf(s,e);let a=e[lt];a!==null&&a.insertView(n),ea(e),e[C]|=128}function yf(n,e){let t=n[Hn],r=e[ee];if($t(r))n[C]|=Oi.HasTransplantedViews;else{let i=r[ee][Ae];e[Ae]!==i&&(n[C]|=Oi.HasTransplantedViews)}t===null?n[Hn]=[e]:t.push(e)}function cl(n,e){let t=n[Hn],r=t.indexOf(e);t.splice(r,1)}function pa(n,e){if(n.length<=be)return;let t=be+e,r=n[t];if(r){let i=r[Ut];i!==null&&i!==n&&cl(i,r),e>0&&(n[t-1][je]=r[je]);let o=xi(n,be+e);lv(r[b],r);let s=o[lt];s!==null&&s.detachView(o[b]),r[ee]=null,r[je]=null,r[C]&=-129}return r}function Df(n,e){if(!(e[C]&256)){let t=e[Z];t.destroyNode&&ro(n,e,t,3,null,null),uv(e)}}function Bs(n,e){if(e[C]&256)return;let t=N(null);try{e[C]&=-129,e[C]|=256,e[Te]&&vs(e[Te]),hv(n,e),fv(n,e),e[b].type===1&&e[Z].destroy();let r=e[Ut];if(r!==null&&ft(e[ee])){r!==e[ee]&&cl(r,e);let i=e[lt];i!==null&&i.detachView(n)}da(e)}finally{N(t)}}function fv(n,e){let t=n.cleanup,r=e[Ai];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ai]=null);let i=e[Mt];if(i!==null){e[Mt]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function hv(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Zt)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Ge(4,a,l);try{l.call(a)}finally{Ge(5,a,l)}}else{Ge(4,i,o);try{o.call(i)}finally{Ge(5,i,o)}}}}}function vf(n,e,t){return pv(n,e.parent,t)}function pv(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[dt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ke.None||o===Ke.Emulated)return null}return $e(r,t)}}function Bi(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wf(n,e,t){n.appendChild(e,t)}function Bu(n,e,t,r,i){r!==null?Bi(n,e,t,r,i):wf(n,e,t)}function Cf(n,e){return n.parentNode(e)}function gv(n,e){return n.nextSibling(e)}function Ef(n,e,t){return yv(n,e,t)}function mv(n,e,t){return n.type&40?$e(n,t):null}var yv=mv,ju;function ul(n,e,t,r){let i=vf(n,r,e),o=e[Z],s=r.parent||e[ye],a=Ef(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Bu(o,i,t[l],a,!1);else Bu(o,i,t,a,!1);ju!==void 0&&ju(o,r,e,t,i)}function fr(n,e){if(e!==null){let t=e.type;if(t&3)return $e(e,n);if(t&4)return ga(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fr(n,r);{let i=n[e.index];return ft(i)?ga(-1,i):Qe(i)}}else{if(t&128)return fr(n,e.next);if(t&32)return ll(e,n)()||Qe(n[e.index]);{let r=bf(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wt(n[Ae]);return fr(i,r)}else return fr(n,e.next)}}}return null}function bf(n,e){if(e!==null){let r=n[Ae][ye],i=e.projection;return r.projection[i]}return null}function ga(n,e){let t=be+n+1;if(t<e.length){let r=e[t],i=r[b].firstChild;if(i!==null)return fr(r,i)}return e[qt]}function Dv(n,e,t){n.removeChild(null,e,t)}function dl(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&Yt(Qe(a),r),t.flags|=2),(t.flags&32)!==32)if(l&8)dl(n,e,t.child,r,i,o,!1),_n(e,n,i,a,o);else if(l&32){let c=ll(t,r),u;for(;u=c();)_n(e,n,i,u,o);_n(e,n,i,a,o)}else l&16?If(n,e,r,t,i,o):_n(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ro(n,e,t,r,i,o){dl(t,r,n.firstChild,e,i,o,!1)}function vv(n,e,t){let r=e[Z],i=vf(n,t,e),o=t.parent||e[ye],s=Ef(o,t,e);If(r,0,e,t,i,s)}function If(n,e,t,r,i,o){let s=t[Ae],l=s[ye].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];_n(e,n,i,u,o)}else{let c=l,u=s[ee];lf(r)&&(c.flags|=128),dl(n,e,c,u,i,o,!0)}}function wv(n,e,t,r,i){let o=t[qt],s=Qe(t);o!==s&&_n(e,n,r,o,i);for(let a=be;a<t.length;a++){let l=t[a];ro(l[b],l,n,e,r,o)}}function Cv(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ut.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ut.Important),n.setStyle(t,r,i,o))}}function Ev(n,e,t){n.setAttribute(e,"style",t)}function Mf(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Sf(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Zs(n,e,r),i!==null&&Mf(n,e,i),o!==null&&Ev(n,e,o)}var Tt={};function Zn(n=1){xf(ae(),F(),nn()+n,!1)}function xf(n,e,t,r){if(!r)if((e[C]&3)===3){let o=n.preOrderCheckHooks;o!==null&&wi(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ci(e,o,0,t)}Gt(t)}function $(n,e=I.Default){let t=F();if(t===null)return A(n,e);let r=Ie();return ef(r,t,se(n),e)}function Nf(n,e,t,r,i,o){let s=N(null);try{let a=null;i&St.SignalBased&&(a=e[r][tu]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&St.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Cd(e,a,r,o)}finally{N(s)}}function bv(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gt(~i);else{let o=i,s=t[++r],a=t[++r];yD(s,o);let l=e[o];a(2,l)}}}finally{Gt(-1)}}function io(n,e,t,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[dt]=i,d[C]=r|4|128|8|64,(c!==null||n&&n[C]&2048)&&(d[C]|=2048),Nd(d),d[ee]=d[br]=n,d[st]=t,d[at]=s||n&&n[at],d[Z]=a||n&&n[Z],d[jn]=l||n&&n[jn]||null,d[ye]=o,d[Yi]=YD(),d[Dr]=u,d[Dd]=c,d[Ae]=e.type==2?n[Ae]:d,d}function Mr(n,e,t,r,i){let o=n.data[e];if(o===null)o=Iv(n,e,t,r,i),mD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=pD();o.injectorIndex=s===null?-1:s.injectorIndex}return Ir(o,!0),o}function Iv(n,e,t,r,i){let o=Rd(),s=Pd(),a=s?o:o&&o.parent,l=n.data[e]=Av(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function Tf(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Af(n,e,t,r,i){let o=nn(),s=r&2;try{Gt(-1),s&&e.length>Ye&&xf(n,e,Ye,!1),Ge(s?2:0,i),t(r,i)}finally{Gt(o),Ge(s?3:1,i)}}function kf(n,e,t){if(wd(e)){let r=N(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{N(r)}}}function Of(n,e,t){Od()&&(Lv(n,e,t,$e(t,e)),(t.flags&64)===64&&Lf(n,e,t))}function _f(n,e,t=$e){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Rf(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function fl(n,e,t,r,i,o,s,a,l,c,u){let d=Ye+r,f=d+i,h=Mv(d,f),p=typeof c=="function"?c():c;return h[b]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function Mv(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Tt);return t}function Sv(n,e,t,r){let o=r.get(iv,pf)||t===Ke.ShadowDom,s=n.selectRootElement(e,o);return xv(s),s}function xv(n){Nv(n)}var Nv=()=>null;function Tv(n,e,t,r){let i=jf(e);i.push(t),n.firstCreatePass&&Hf(n).push(r,i.length-1)}function Av(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return _d()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Hu(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=St.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}n===0?$u(r,t,c,a,l):$u(r,t,c,a)}return r}function $u(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function kv(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;l=Hu(0,d.inputs,u,l,h),c=Hu(1,d.outputs,u,c,p);let g=l!==null&&s!==null&&!za(e)?Wv(l,u,s):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Ov(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _v(n,e,t,r,i,o,s,a){let l=$e(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[r])?(hl(n,t,u,r,i),Qi(e)&&Rv(t,e.index)):e.type&3?(r=Ov(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(l,r,i)):e.type&12}function Rv(n,e){let t=tn(e,n);t[C]&16||(t[C]|=64)}function Pf(n,e,t,r){if(Od()){let i=r===null?null:{"":-1},o=Bv(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Ff(n,e,t,s,i,a),i&&jv(t,r,i)}t.mergedAttrs=yr(t.mergedAttrs,t.attrs)}function Ff(n,e,t,r,i,o){for(let c=0;c<r.length;c++)ia(Fi(t,e),n,r[c].type);$v(t,n.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=Tf(n,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];t.mergedAttrs=yr(t.mergedAttrs,u.hostAttrs),zv(n,t,e,l,u),Hv(l,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}kv(n,t,o)}function Pv(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Fv(s)!=a&&s.push(a),s.push(t,r,o)}}function Fv(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Lv(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Qi(t)&&Uv(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fi(t,e),Yt(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=n.data[a],c=Jt(e,n,a,t);if(Yt(c,e),s!==null&&qv(e,a-i,c,l,t,s),Nt(l)){let u=tn(t.index,e);u[st]=Jt(e,n,a,t)}}}function Lf(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=DD();try{Gt(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];ta(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Vv(l,c)}}finally{Gt(-1),ta(s)}}function Vv(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Bv(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(cd(e,s.selectors,!1))if(r||(r=[]),Nt(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;ma(n,e,l)}else r.unshift(s),ma(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function ma(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function jv(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new x(-301,!1);r.push(e[i],o)}}}function Hv(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Nt(e)&&(t[""]=n)}}function $v(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zv(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Fn(i.type,!0)),s=new Zt(o,Nt(i),$);n.blueprint[r]=s,t[r]=s,Pv(n,e,r,Tf(n,t,i.hostVars,Tt),i)}function Uv(n,e,t){let r=$e(e,n),i=Rf(t),o=n[at].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=oo(n,io(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function qv(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];Nf(r,t,l,c,u,d)}}function Wv(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Vf(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Bf(n,e){let t=n.contentQueries;if(t!==null){let r=N(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Ja(o),a.contentQueries(2,e[s],s)}}}finally{N(r)}}}function oo(n,e){return n[vr]?n[xu][je]=e:n[vr]=e,n[xu]=e,e}function ya(n,e,t){Ja(0);let r=N(null);try{e(n,t)}finally{N(r)}}function jf(n){return n[Ai]??=[]}function Hf(n){return n.cleanup??=[]}function $f(n,e){let t=n[jn],r=t?t.get(ct,null):null;r&&r.handleError(e)}function hl(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],c=e[s],u=n.data[s];Nf(u,c,r,a,l,i)}}function Gv(n,e,t){let r=Sd(e,n);av(n[Z],r,t)}function Zv(n,e){let t=tn(e,n),r=t[b];Jv(r,t);let i=t[dt];i!==null&&t[Dr]===null&&(t[Dr]=al(i,t[jn])),pl(r,t,t[st])}function Jv(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pl(n,e,t){Ka(e);try{let r=n.viewQuery;r!==null&&ya(1,r,t);let i=n.template;i!==null&&Af(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[lt]?.finishViewCreation(n),n.staticContentQueries&&Bf(n,e),n.staticViewQueries&&ya(2,n.viewQuery,t);let o=n.components;o!==null&&Kv(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[C]&=-5,Ya()}}function Kv(n,e){for(let t=0;t<e.length;t++)Zv(n,e[t])}function zf(n,e,t,r){let i=N(null);try{let o=e.tView,a=n[C]&4096?4096:16,l=io(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Ut]=c;let u=n[lt];return u!==null&&(l[lt]=u.createEmbeddedView(o)),pl(o,l,t),l}finally{N(i)}}function Da(n,e){return!e||e.firstChild===null||lf(n)}function Uf(n,e,t,r=!0){let i=e[b];if(dv(i,e,n,t),r){let s=ga(t,n),a=e[Z],l=Cf(a,n[qt]);l!==null&&cv(i,n[ye],a,e,l,s)}let o=e[Dr];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ji(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Qe(o)),ft(o)&&Yv(o,r);let s=t.type;if(s&8)ji(n,e,t.child,r);else if(s&32){let a=ll(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=bf(e,t);if(Array.isArray(a))r.push(...a);else{let l=Wt(e[Ae]);ji(l[b],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Yv(n,e){for(let t=be;t<n.length;t++){let r=n[t],i=r[b].firstChild;i!==null&&ji(r[b],r,i,e)}n[qt]!==n[dt]&&e.push(n[qt])}var qf=[];function Qv(n){return n[Te]??Xv(n)}function Xv(n){let e=qf.pop()??Object.create(t0);return e.lView=n,e}function e0(n){n.lView[Te]!==n&&(n.lView=null,qf.push(n))}var t0=X(j({},ms),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{eo(n.lView)},consumerOnSignalRead(){this.lView[Te]=this}});function n0(n){let e=n[Te]??Object.create(r0);return e.lView=n,e}var r0=X(j({},ms),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Wt(n.lView);for(;e&&!Wf(e[b]);)e=Wt(e);e&&Td(e)},consumerOnSignalRead(){this.lView[Te]=this}});function Wf(n){return n.type!==2}var i0=100;function Gf(n,e=!0,t=0){let r=n[at],i=r.rendererFactory,o=!1;o||i.begin?.();try{o0(n,t)}catch(s){throw e&&$f(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function o0(n,e){let t=Ld();try{Tu(!0),va(n,e);let r=0;for(;Xi(n);){if(r===i0)throw new x(103,!1);r++,va(n,1)}}finally{Tu(t)}}function s0(n,e,t,r){let i=e[C];if((i&256)===256)return;let o=!1,s=!1;!o&&e[at].inlineEffectRunner?.flush(),Ka(e);let a=!0,l=null,c=null;o||(Wf(n)?(c=Qv(e),l=ys(c)):nu()===null?(a=!1,c=n0(e),l=ys(c)):e[Te]&&(vs(e[Te]),e[Te]=null));try{Nd(e),gD(n.bindingStartIndex),t!==null&&Af(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let h=n.preOrderCheckHooks;h!==null&&wi(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Ci(e,h,0,null),Ps(e,0)}if(s||a0(e),Zf(e,0),n.contentQueries!==null&&Bf(n,e),!o)if(u){let h=n.contentCheckHooks;h!==null&&wi(e,h)}else{let h=n.contentHooks;h!==null&&Ci(e,h,1),Ps(e,1)}bv(n,e);let d=n.components;d!==null&&Kf(e,d,0);let f=n.viewQuery;if(f!==null&&ya(2,f,r),!o)if(u){let h=n.viewCheckHooks;h!==null&&wi(e,h)}else{let h=n.viewHooks;h!==null&&Ci(e,h,2),Ps(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Rs]){for(let h of e[Rs])h();e[Rs]=null}o||(e[C]&=-73)}catch(u){throw o||eo(e),u}finally{c!==null&&(ru(c,l),a&&e0(c)),Ya()}}function Zf(n,e){for(let t=uf(n);t!==null;t=df(t))for(let r=be;r<t.length;r++){let i=t[r];Jf(i,e)}}function a0(n){for(let e=uf(n);e!==null;e=df(e)){if(!(e[C]&Oi.HasTransplantedViews))continue;let t=e[Hn];for(let r=0;r<t.length;r++){let i=t[r];Td(i)}}}function l0(n,e,t){let r=tn(e,n);Jf(r,t)}function Jf(n,e){Za(n)&&va(n,e)}function va(n,e){let r=n[b],i=n[C],o=n[Te],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ds(o)),s||=!1,o&&(o.dirty=!1),n[C]&=-9217,s)s0(r,n,r.template,n[st]);else if(i&8192){Zf(n,1);let a=r.components;a!==null&&Kf(n,a,1)}}function Kf(n,e,t){for(let r=0;r<e.length;r++)l0(n,e[r],t)}function gl(n,e){let t=Ld()?64:1088;for(n[at].changeDetectionScheduler?.notify(e);n;){n[C]|=t;let r=Wt(n);if(Qs(n)&&!r)return n;n=r}return null}var Qt=class{get rootNodes(){let e=this._lView,t=e[b];return ji(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[st]}set context(e){this._lView[st]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ee];if(ft(e)){let t=e[ki],r=t?t.indexOf(this):-1;r>-1&&(pa(e,r),xi(t,r))}this._attachedToViewContainer=!1}Df(this._lView[b],this._lView)}onDestroy(e){Ad(this._lView,e)}markForCheck(){gl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[C]&=-129}reattach(){ea(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,Gf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qs(this._lView),t=this._lView[Ut];t!==null&&!e&&cl(t,this._lView),mf(this._lView[b],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e;let t=Qs(this._lView),r=this._lView[Ut];r!==null&&!t&&yf(r,this._lView),ea(this._lView)}},Xt=(()=>{class n{static{this.__NG_ELEMENT_ID__=d0}}return n})(),c0=Xt,u0=class extends c0{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=zf(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Qt(i)}};function d0(){return ml(Ie(),F())}function ml(n,e){return n.type&4?new u0(e,n,Wn(n,e)):null}var HS=new RegExp(`^(\\d+)*(${nv}|${tv})*(.*)`);var f0=()=>null;function wa(n,e){return f0(n,e)}var $n=class{},yl=new R("",{providedIn:"root",factory:()=>!1});var Yf=new R(""),Qf=new R(""),Ca=class{},Hi=class{};function h0(n){let e=Error(`No component factory found for ${Ne(n)}.`);return e[p0]=n,e}var p0="ngComponent";var Ea=class{resolveComponentFactory(e){throw h0(e)}},wr=class{static{this.NULL=new Ea}},zn=class{};var g0=(()=>{class n{static{this.\u0275prov=V({token:n,providedIn:"root",factory:()=>null})}}return n})();function ba(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qs(i,a);else if(o==2){let l=a,c=e[++s];r=qs(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ia=class extends wr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vn(e);return new $i(t,this.ngModule)}};function zu(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:St.None;e?t.push({propName:s,templateName:r,isSignal:(a&St.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function m0(n){let e=n.toLowerCase();return e==="svg"?iD:e==="math"?oD:null}var $i=class extends Hi{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=zu(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return zu(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Fy(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=N(null);try{i=i||this.ngModule;let s=i instanceof xt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new na(e,s):e,l=a.get(zn,null);if(l===null)throw new x(407,!1);let c=a.get(g0,null),u=a.get($n,null),d={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:u},f=l.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?Sv(f,r,this.componentDef.encapsulation,a):gf(f,h,m0(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=al(p,a,!0));let v=fl(0,null,null,1,0,null,null,null,null,null,null),T=io(null,v,null,g,null,null,d,f,a,null,m);Ka(T);let U,B,he=null;try{let P=this.componentDef,qe,Et=null;P.findHostDirectiveDefs?(qe=[],Et=new Map,P.findHostDirectiveDefs(P,qe,Et),qe.push(P)):qe=[P];let M=y0(T,p);he=D0(M,p,P,qe,T,d,f),B=xd(v,Ye),p&&C0(f,P,p,r),t!==void 0&&E0(B,this.ngContentSelectors,t),U=w0(he,P,qe,Et,T,[b0]),pl(v,T,null)}catch(P){throw he!==null&&da(he),da(T),P}finally{Ya()}return new Ma(this.componentType,U,Wn(B,T),T,B)}finally{N(o)}}},Ma=class extends Ca{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Qt(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;hl(o[b],o,i,e,t),this.previousInputValues.set(e,t);let s=tn(this._tNode.index,o);gl(s,1)}}get injector(){return new zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function y0(n,e){let t=n[b],r=Ye;return n[r]=e,Mr(t,r,2,"#host",null)}function D0(n,e,t,r,i,o,s){let a=i[b];v0(r,n,e,s);let l=null;e!==null&&(l=al(e,i[jn]));let c=o.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=io(i,Rf(t),null,u,i[n.index],n,o,c,null,null,l);return a.firstCreatePass&&ma(a,n,r.length-1),oo(i,d),i[n.index]=d}function v0(n,e,t,r){for(let i of n)e.mergedAttrs=yr(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ba(e,e.mergedAttrs,!0),t!==null&&Sf(r,t,e))}function w0(n,e,t,r,i,o){let s=Ie(),a=i[b],l=$e(s,i);Ff(a,i,s,t,null,r);for(let u=0;u<t.length;u++){let d=s.directiveStart+u,f=Jt(i,a,d,s);Yt(f,i)}Lf(a,i,s),l&&Yt(l,i);let c=Jt(i,a,s.directiveStart+s.componentOffset,s);if(n[st]=i[st]=c,o!==null)for(let u of o)u(c,e);return kf(a,s,i),c}function C0(n,e,t,r){if(r)Zs(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=Ly(e.selectors[0]);i&&Zs(n,t,i),o&&o.length>0&&Mf(n,t,o.join(" "))}}function E0(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function b0(){let n=Ie();el(F()[b],n)}var At=(()=>{class n{static{this.__NG_ELEMENT_ID__=I0}}return n})();function I0(){let n=Ie();return eh(n,F())}var M0=At,Xf=class extends M0{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wn(this._hostTNode,this._hostLView)}get injector(){return new zt(this._hostTNode,this._hostLView)}get parentInjector(){let e=tl(this._hostTNode,this._hostLView);if(Zd(e)){let t=Pi(e,this._hostLView),r=Ri(e),i=t[b].data[r+8];return new zt(i,t)}else return new zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Uu(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-be}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=wa(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Da(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!eD(e),a;if(s)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new $i(Vn(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let g=(s?c:this.parentInjector).get(xt,null);g&&(o=g)}let u=Vn(l.componentType??{}),d=wa(this._lContainer,u?.id??null),f=d?.firstChild??null,h=l.create(c,i,f,o);return this.insertImpl(h.hostView,a,Da(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(aD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ee],c=new Xf(l,l[ye],l[ee]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Uf(s,i,o,r),e.attachToViewContainerRef(),id(js(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Uu(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=pa(this._lContainer,t);r&&(xi(js(this._lContainer),t),Df(r[b],r))}detach(e){let t=this._adjustIndex(e,-1),r=pa(this._lContainer,t);return r&&xi(js(this._lContainer),t)!=null?new Qt(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Uu(n){return n[ki]}function js(n){return n[ki]||(n[ki]=[])}function eh(n,e){let t,r=e[n.index];return ft(r)?t=r:(t=Vf(r,e,null,n),e[n.index]=t,oo(e,t)),x0(t,e,n,r),new Xf(t,n,e)}function S0(n,e){let t=n[Z],r=t.createComment(""),i=$e(e,n),o=Cf(t,i);return Bi(t,o,r,gv(t,i),!1),r}var x0=A0,N0=()=>!1;function T0(n,e,t){return N0(n,e,t)}function A0(n,e,t,r){if(n[qt])return;let i;t.type&8?i=Qe(r):i=S0(e,t),n[qt]=i}var Sa=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},xa=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Dl(e,t).matches!==null&&this.queries[t].setDirty()}},zi=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=V0(e):this.predicate=e}},Na=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ta=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,k0(t,o)),this.matchTNodeWithReadOption(e,t,Ei(t,e,o,!1,!1))}else r===Xt?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ei(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===De||i===At||i===Xt&&t.type&4)this.addMatch(t.index,-2);else{let o=Ei(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function k0(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function O0(n,e){return n.type&11?Wn(n,e):n.type&4?ml(n,e):null}function _0(n,e,t,r){return t===-1?O0(e,n):t===-2?R0(n,e,r):Jt(n,n[b],t,e)}function R0(n,e,t){if(t===De)return Wn(e,n);if(t===Xt)return ml(e,n);if(t===At)return eh(e,n)}function th(n,e,t,r){let i=e[lt].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(_0(e,u,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Aa(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=th(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=be;d<u.length;d++){let f=u[d];f[Ut]===f[ee]&&Aa(f[b],f,c,r)}if(u[Hn]!==null){let d=u[Hn];for(let f=0;f<d.length;f++){let h=d[f];Aa(h[b],h,c,r)}}}}}return r}function P0(n,e){return n[lt].queries[e].queryList}function nh(n,e,t){let r=new ua((t&4)===4);return Tv(n,e,r,r.destroy),(e[lt]??=new xa).queries.push(new Sa(r))-1}function F0(n,e,t){let r=ae();return r.firstCreatePass&&(rh(r,new zi(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),nh(r,F(),e)}function L0(n,e,t,r){let i=ae();if(i.firstCreatePass){let o=Ie();rh(i,new zi(e,t,r),o.index),B0(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return nh(i,F(),t)}function V0(n){return n.split(",").map(e=>e.trim())}function rh(n,e,t){n.queries===null&&(n.queries=new Na),n.queries.track(new Ta(e,t))}function B0(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Dl(n,e){return n.queries.getByIndex(e)}function j0(n,e){let t=n[b],r=Dl(t,e);return r.crossesNgTemplate?Aa(t,n,e,[]):th(t,n,r,e)}var qu=new Set;function ih(n){qu.has(n)||(qu.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function H0(n){return Object.getPrototypeOf(n.prototype).constructor}function ze(n){let e=H0(n.type),t=!0,r=[n];for(;e;){let i;if(Nt(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=mi(n.inputs),s.inputTransforms=mi(n.inputTransforms),s.declaredInputs=mi(n.declaredInputs),s.outputs=mi(n.outputs);let a=i.hostBindings;a&&W0(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&U0(n,l),c&&q0(n,c),$0(n,i),ey(n.outputs,i.outputs),Nt(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ze&&(t=!1)}}e=Object.getPrototypeOf(e)}z0(r)}function $0(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function z0(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yr(i.hostAttrs,t=yr(t,i.hostAttrs))}}function mi(n){return n===Ln?{}:n===ge?[]:n}function U0(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function q0(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function W0(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Un=class{};var Ui=class extends Un{constructor(e){super(),this.componentFactoryResolver=new Ia(this),this.instance=null;let t=new Ti([...e.providers,{provide:Un,useValue:this},{provide:wr,useValue:this.componentFactoryResolver}],e.parent||Wa(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function G0(n,e,t=null){return new Ui({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function so(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Z0(n){return(n.flags&32)===32}function J0(n,e,t,r,i,o,s,a,l){let c=e.consts,u=Mr(e,n,4,s||null,a||null);Pf(e,t,u,_i(c,l)),el(e,u);let d=u.tView=fl(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function oh(n,e,t,r,i,o,s,a,l,c){let u=t+Ye,d=e.firstCreatePass?J0(u,e,n,r,i,o,s,a,l):e.data[u];Ir(d,!1);let f=K0(e,n,d,t);Qa()&&ul(e,n,f,d),Yt(f,n);let h=Vf(f,n,f,d);return n[u]=h,oo(n,h),T0(h,d,n),Ga(d)&&Of(e,n,d),l!=null&&_f(n,d,c),d}function vl(n,e,t,r,i,o,s,a){let l=F(),c=ae(),u=_i(c.consts,o);return oh(l,c,n,e,t,r,i,u,s,a),vl}var K0=Y0;function Y0(n,e,t,r){return Xa(!0),e[Z].createComment("")}var hr=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(hr||{}),Q0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Wu=class n{constructor(){this.ngZone=O(q),this.scheduler=O($n),this.errorHandler=O(ct,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[hr.EarlyRead,hr.Write,hr.MixedReadWrite,hr.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}};function X0(n,e,t,r){return so(n,Vd(),t)?e+td(t)+r:Tt}function yi(n,e){return n<<17|e<<2}function en(n){return n>>17&32767}function ew(n){return(n&2)==2}function tw(n,e){return n&131071|e<<17}function ka(n){return n|2}function qn(n){return(n&131068)>>2}function Hs(n,e){return n&-131069|e<<2}function nw(n){return(n&1)===1}function Oa(n){return n|1}function rw(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=en(s),l=qn(s);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Er(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let f=en(n[a+1]);n[r+1]=yi(f,a),f!==0&&(n[f+1]=Hs(n[f+1],r)),n[a+1]=tw(n[a+1],r)}else n[r+1]=yi(a,0),a!==0&&(n[a+1]=Hs(n[a+1],r)),a=r;else n[r+1]=yi(l,0),a===0?a=r:n[l+1]=Hs(n[l+1],r),l=r;c&&(n[r+1]=ka(n[r+1])),Gu(n,u,r,!0),Gu(n,u,r,!1),iw(e,u,n,r,o),s=yi(a,l),o?e.classBindings=s:e.styleBindings=s}function iw(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Er(o,e)>=0&&(t[r+1]=Oa(t[r+1]))}function Gu(n,e,t,r){let i=n[t+1],o=e===null,s=r?en(i):qn(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];ow(l,e)&&(a=!0,n[s+1]=r?Oa(c):ka(c)),s=r?en(c):qn(c)}a&&(n[t+1]=r?ka(i):Oa(i))}function ow(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Er(n,e)>=0:!1}var Be={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sw(n){return n.substring(Be.key,Be.keyEnd)}function aw(n){return lw(n),sh(n,ah(n,0,Be.textEnd))}function sh(n,e){let t=Be.textEnd;return t===e?-1:(e=Be.keyEnd=cw(n,Be.key=e,t),ah(n,e,t))}function lw(n){Be.key=0,Be.keyEnd=0,Be.value=0,Be.valueEnd=0,Be.textEnd=n.length}function ah(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function cw(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function wl(n,e,t){let r=F(),i=Vd();if(so(r,i,e)){let o=ae(),s=CD();_v(o,s,r,n,e,r[Z],t,!1)}return wl}function _a(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";hl(n,t,o[s],s,r)}function Cl(n,e){return dw(n,e,null,!0),Cl}function lh(n){fw(Dw,uw,n,!0)}function uw(n,e){for(let t=aw(e);t>=0;t=sh(e,t))$a(n,sw(e),!0)}function dw(n,e,t,r){let i=F(),o=ae(),s=Bd(2);if(o.firstUpdatePass&&uh(o,n,s,r),e!==Tt&&so(i,s,e)){let a=o.data[nn()];dh(o,a,i,i[Z],n,i[s+1]=ww(e,t),r,s)}}function fw(n,e,t,r){let i=ae(),o=Bd(2);i.firstUpdatePass&&uh(i,null,o,r);let s=F();if(t!==Tt&&so(s,o,t)){let a=i.data[nn()];if(fh(a,r)&&!ch(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=qs(l,t||"")),_a(i,a,s,t,r)}else vw(i,a,s,s[Z],s[o+1],s[o+1]=yw(n,e,t),r,o)}}function ch(n,e){return e>=n.expandoStartIndex}function uh(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[nn()],s=ch(n,t);fh(o,r)&&e===null&&!s&&(e=!1),e=hw(i,o,e,r),rw(i,o,e,t,s,r)}}function hw(n,e,t,r){let i=vD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$s(null,n,e,t,r),t=Cr(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$s(i,n,e,t,r),o===null){let l=pw(n,e,r);l!==void 0&&Array.isArray(l)&&(l=$s(null,n,e,l[1],r),l=Cr(l,e.attrs,r),gw(n,e,r,l))}else o=mw(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function pw(n,e,t){let r=t?e.classBindings:e.styleBindings;if(qn(r)!==0)return n[en(r)]}function gw(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[en(i)]=r}function mw(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Cr(r,s,t)}return Cr(r,e.attrs,t)}function $s(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Cr(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Cr(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),$a(n,s,t?!0:e[++o]))}return n===void 0?null:n}function yw(n,e,t){if(t==null||t==="")return ge;let r=[],i=no(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Dw(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&$a(n,r,t)}function vw(n,e,t,r,i,o,s,a){i===Tt&&(i=ge);let l=0,c=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let f=l<i.length?i[l+1]:void 0,h=c<o.length?o[c+1]:void 0,p=null,g;u===d?(l+=2,c+=2,f!==h&&(p=d,g=h)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,g=h),p!==null&&dh(n,e,t,r,p,g,s,a),u=l<i.length?i[l]:null,d=c<o.length?o[c]:null}}function dh(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=nw(c)?Zu(l,e,t,i,qn(c),s):void 0;if(!qi(u)){qi(o)||ew(c)&&(o=Zu(l,null,t,i,a,s));let d=Sd(nn(),t);Cv(r,s,d,i,o)}}function Zu(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,f=t[i+1];f===Tt&&(f=d?ge:void 0);let h=d?Os(f,r):u===r?f:void 0;if(c&&!qi(h)&&(h=Os(l,r)),qi(h)&&(a=h,s))return a;let p=n[i+1];i=s?en(p):qn(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Os(l,r))}return a}function qi(n){return n!==void 0}function ww(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ne(no(n)))),n}function fh(n,e){return(n.flags&(e?8:16))!==0}function Cw(n,e,t,r,i,o){let s=e.consts,a=_i(s,i),l=Mr(e,n,2,r,a);return Pf(e,t,l,_i(s,o)),l.attrs!==null&&ba(l,l.attrs,!1),l.mergedAttrs!==null&&ba(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ke(n,e,t,r){let i=F(),o=ae(),s=Ye+n,a=i[Z],l=o.firstCreatePass?Cw(s,o,i,e,t,r):o.data[s],c=Ew(o,i,l,a,e,n);i[s]=c;let u=Ga(l);return Ir(l,!0),Sf(a,c,l),!Z0(l)&&Qa()&&ul(o,i,c,l),cD()===0&&Yt(c,i),uD(),u&&(Of(o,i,l),kf(o,l,i)),r!==null&&_f(i,l),ke}function Oe(){let n=Ie();Pd()?Fd():(n=n.parent,Ir(n,!1));let e=n;fD(e)&&hD(),dD();let t=ae();return t.firstCreatePass&&(el(t,n),wd(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&SD(e)&&_a(t,e,F(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&xD(e)&&_a(t,e,F(),e.stylesWithoutHost,!1),Oe}function rn(n,e,t,r){return ke(n,e,t,r),Oe(),rn}var Ew=(n,e,t,r,i,o)=>(Xa(!0),gf(r,i,ED()));var Wi="en-US";var bw=Wi;function Iw(n){typeof n=="string"&&(bw=n.toLowerCase().replace(/_/g,"-"))}var Mw=(n,e,t)=>{};function El(n,e,t,r){let i=F(),o=ae(),s=Ie();return xw(o,i,i[Z],s,n,e,r),El}function Sw(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ai],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function xw(n,e,t,r,i,o,s){let a=Ga(r),c=n.firstCreatePass&&Hf(n),u=e[st],d=jf(e),f=!0;if(r.type&3||s){let g=$e(r,e),m=s?s(g):g,v=d.length,T=s?B=>s(Qe(B[r.index])):r.index,U=null;if(!s&&a&&(U=Sw(n,e,i,r.index)),U!==null){let B=U.__ngLastListenerFn__||U;B.__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,f=!1}else{o=Ku(r,e,u,o),Mw(g,i,o);let B=t.listen(m,i,o);d.push(o,B),c&&c.push(i,T,v,v+1)}}else o=Ku(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let v=p[m],T=p[m+1],he=e[v][T].subscribe(o),P=d.length;d.push(o,he),c&&c.push(i,r.index,P,-(P+1))}}}function Ju(n,e,t,r){let i=N(null);try{return Ge(6,e,t),t(r)!==!1}catch(o){return $f(n,o),!1}finally{Ge(7,e,t),N(i)}}function Ku(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?tn(n.index,e):e;gl(s,5);let a=Ju(e,t,r,o),l=i.__ngNextListenerFn__;for(;l;)a=Ju(e,t,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Nw(n,e){let t=null,r=ky(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?cd(n,o,!0):Ry(r,o))return i}return t}function ao(n){let e=F()[Ae][ye];if(!e.projection){let t=n?n.length:1,r=e.projection=Cy(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?Nw(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function lo(n,e=0,t,r,i,o){let s=F(),a=ae(),l=r?n+1:null;l!==null&&oh(s,a,l,r,i,o,null,t);let c=Mr(a,Ye+n,16,null,t||null);c.projection===null&&(c.projection=e),Fd();let d=!s[Dr]||_d();s[Ae][ye].projection[c.projection]===null&&l!==null?Tw(s,a,l):d&&(c.flags&32)!==32&&vv(a,s,c)}function Tw(n,e,t){let r=Ye+t,i=e.data[r],o=n[r],s=wa(o,i.tView.ssrId),a=zf(n,i,void 0,{dehydratedView:s});Uf(o,a,0,Da(i,s))}function hh(n,e,t,r){L0(n,e,t,r)}function co(n,e,t){F0(n,e,t)}function Jn(n){let e=F(),t=ae(),r=jd();Ja(r+1);let i=Dl(t,r);if(n.dirty&&sD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=j0(e,r);n.reset(o,ZD),n.notifyOnChanges()}return!0}return!1}function Kn(){return P0(F(),jd())}function on(n,e=""){let t=F(),r=ae(),i=n+Ye,o=r.firstCreatePass?Mr(r,i,1,e,null):r.data[i],s=Aw(r,t,o,e,n);t[i]=s,Qa()&&ul(r,t,s,o),Ir(o,!1)}var Aw=(n,e,t,r,i)=>(Xa(!0),sv(e[Z],r));function bl(n){return uo("",n,""),bl}function uo(n,e,t){let r=F(),i=X0(r,n,e,t);return i!==Tt&&Gv(r,nn(),i),uo}function kw(n,e,t){let r=ae();if(r.firstCreatePass){let i=Nt(n);Ra(t,r.data,r.blueprint,i,!0),Ra(e,r.data,r.blueprint,i,!1)}}function Ra(n,e,t,r,i){if(n=se(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ra(n[o],e,t,r,i);else{let o=ae(),s=F(),a=Ie(),l=Bn(n)?n:se(n.provide),c=yd(n),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(Bn(n)||!n.multi){let h=new Zt(c,i,$),p=Us(l,e,i?u:u+f,d);p===-1?(ia(Fi(a,s),o,l),zs(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[p]=h,s[p]=h)}else{let h=Us(l,e,u+f,d),p=Us(l,e,u,u+f),g=h>=0&&t[h],m=p>=0&&t[p];if(i&&!m||!i&&!g){ia(Fi(a,s),o,l);let v=Rw(i?_w:Ow,t.length,i,r,c);!i&&m&&(t[p].providerFactory=v),zs(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)}else{let v=ph(t[i?p:h],c,!i&&r);zs(o,n,h>-1?h:p,v)}!i&&r&&m&&t[p].componentProviders++}}}function zs(n,e,t,r){let i=Bn(e),o=Wy(e);if(i||o){let l=(o?se(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function ph(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Us(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Ow(n,e,t,r){return Pa(this.multi,[])}function _w(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Jt(t,t[b],this.providerFactory.index,r);o=a.slice(0,s),Pa(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Pa(i,o);return o}function Pa(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Rw(n,e,t,r,i){let o=new Zt(n,t,$);return o.multi=[],o.index=e,o.componentProviders=0,ph(o,i,r&&!t),o}function fo(n,e=[]){return t=>{t.providersResolver=(r,i)=>kw(r,i?i(n):n,e)}}var Pw=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=pd(!1,t.type),i=r.length>0?G0([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(A(xt))})}}return n})();function ve(n){ih("NgStandalone"),n.getStandaloneInjector=e=>e.get(Pw).getOrCreateStandaloneInjector(n)}var gh=new R("");function Il(n){return!!n&&typeof n.then=="function"}function mh(n){return!!n&&typeof n.subscribe=="function"}var Fw=new R(""),yh=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=O(Fw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Il(o))t.push(o);else if(mh(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lw=new R("");function Vw(){iu(()=>{throw new x(600,!1)})}function Bw(n){return n.isBoundToModule}var jw=10;function Hw(n,e,t){try{let r=t();return Il(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Sr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(WD),this.afterRenderManager=O(Q0),this.zonelessEnabled=O(yl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new It,this.afterTick=new It,this.componentTypes=[],this.components=[],this.isStable=O(to).hasPendingTasks.pipe(ks(t=>!t)),this._injector=O(xt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Hi;if(!this._injector.get(yh).done){let f=!i&&jy(t),h=!1;throw new x(405,h)}let s;i?s=t:s=this._injector.get(wr).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=Bw(s)?void 0:this._injector.get(Un),l=r||s.selector,c=s.create(Kt.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(gh,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),bi(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new x(101,!1);let t=N(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,N(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(zn,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<jw;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)$w(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Xi(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;bi(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Lw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>bi(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bi(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $w(n,e,t,r){if(!t&&!Xi(n))return;Gf(n,e,t&&!r?0:1)}var zw=(()=>{class n{constructor(){this.zone=O(q),this.changeDetectionScheduler=O($n),this.applicationRef=O(Sr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new q(X(j({},qw()),{scheduleInRootZone:t})),[{provide:q,useFactory:n},{provide:mr,multi:!0,useFactory:()=>{let r=O(zw,{optional:!0});return()=>r.initialize()}},{provide:mr,multi:!0,useFactory:()=>{let r=O(Ww);return()=>{r.initialize()}}},e===!0?{provide:Yf,useValue:!0}:[],{provide:Qf,useValue:t??rf}]}function qw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Ww=(()=>{class n{constructor(){this.subscription=new oe,this.initialized=!1,this.zone=O(q),this.pendingTasks=O(to)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{q.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{q.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Gw=(()=>{class n{constructor(){this.appRef=O(Sr),this.taskService=O(to),this.ngZone=O(q),this.zonelessEnabled=O(yl),this.disableScheduling=O(Yf,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new oe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vi):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(Qf,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ca||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Pu:sf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vi+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pu(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zw(){return typeof $localize<"u"&&$localize.locale||Wi}var Ml=new R("",{providedIn:"root",factory:()=>O(Ml,I.Optional|I.SkipSelf)||Zw()});var Fa=new R("");function Di(n){return!n.moduleRef}function Jw(n){let e=Di(n)?n.r3Injector:n.moduleRef.injector,t=e.get(q);return t.run(()=>{Di(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ct,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Di(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Fa);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Fa);s.add(o),n.moduleRef.onDestroy(()=>{bi(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Hw(r,t,()=>{let o=e.get(yh);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ml,Wi);if(Iw(s||Wi),Di(n)){let a=e.get(Sr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Kw(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Kw(n,e){let t=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new x(-403,!1);e.push(n)}var Ii=null;function Yw(n=[],e){return Kt.create({name:e,providers:[{provide:Ki,useValue:"platform"},{provide:Fa,useValue:new Set([()=>Ii=null])},...n]})}function Qw(n=[]){if(Ii)return Ii;let e=Yw(n);return Ii=e,Vw(),Xw(e),e}function Xw(n){n.get(ol,null)?.forEach(t=>t())}var ho=(()=>{class n{static{this.__NG_ELEMENT_ID__=eC}}return n})();function eC(n){return tC(Ie(),F(),(n&16)===16)}function tC(n,e,t){if(Qi(n)&&!t){let r=tn(n.index,e);return new Qt(r,r)}else if(n.type&175){let r=e[Ae];return new Qt(r,e)}return null}function Dh(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Qw(r),o=[Uw({}),{provide:$n,useExisting:Gw},...t||[]],s=new Ui({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return Jw({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var vh=null;function Sl(){return vh}function wh(n){vh??=n}var po=class{};var kt=new R("");function Ch(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var xr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ua({type:n})}static{this.\u0275inj=Va({})}}return n})(),Eh="browser",iC="server";function xl(n){return n===iC}var go=class{};var Al=class extends po{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kl=class n extends Al{static makeCurrent(){wh(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sC();return t==null?null:aC(t)}resetBaseElement(){Nr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Ch(document.cookie,e)}},Nr=null;function sC(){return Nr=Nr||document.querySelector("base"),Nr?Nr.getAttribute("href"):null}function aC(n){return new URL(n,document.baseURI).pathname}var lC=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Ol=new R(""),Sh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(A(Ol),A(q))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),mo=class{constructor(e){this._doc=e}},Nl="ng-app-id",xh=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xl(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Nl}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Nl),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Nl,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(A(kt),A(il),A(sl,8),A(Gn))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Tl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rl=/%COMP%/g,Nh="%COMP%",cC=`_nghost-${Nh}`,uC=`_ngcontent-${Nh}`,dC=!0,fC=new R("",{providedIn:"root",factory:()=>dC});function hC(n){return uC.replace(Rl,n)}function pC(n){return cC.replace(Rl,n)}function Th(n,e){return e.map(t=>t.replace(Rl,n))}var bh=(()=>{class n{constructor(t,r,i,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=xl(a),this.defaultRenderer=new Tr(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ke.ShadowDom&&(r=X(j({},r),{encapsulation:Ke.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof yo?i.applyToHost(t):i instanceof Ar&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ke.Emulated:o=new yo(l,c,r,this.appId,u,s,a,d);break;case Ke.ShadowDom:return new _l(l,c,t,r,s,a,this.nonce,d);default:o=new Ar(l,c,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(A(Sh),A(xh),A(il),A(fC),A(kt),A(Gn),A(q),A(sl))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Tr=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Tl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ih(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ih(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Tl[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Tl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ut.DashCase|ut.Important)?e.style.setProperty(t,r,i&ut.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ut.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Sl().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Ih(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _l=class extends Tr{constructor(e,t,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Th(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ar=class extends Tr{constructor(e,t,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Th(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},yo=class extends Ar{constructor(e,t,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,t,r,o,s,a,l,c),this.contentAttr=hC(c),this.hostAttr=pC(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},gC=(()=>{class n extends mo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(A(kt))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),Mh=["alt","control","meta","shift"],mC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yC={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},DC=(()=>{class n extends mo{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sl().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Mh.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=mC[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Mh.forEach(s=>{if(s!==i){let a=yC[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(A(kt))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function Ah(n,e){return Dh(j({rootComponent:n},vC(e)))}function vC(n){return{appProviders:[...IC,...n?.providers??[]],platformProviders:bC}}function wC(){kl.makeCurrent()}function CC(){return new ct}function EC(){return hf(document),document}var bC=[{provide:Gn,useValue:Eh},{provide:ol,useValue:wC,multi:!0},{provide:kt,useFactory:EC,deps:[]}];var IC=[{provide:Ki,useValue:"root"},{provide:ct,useFactory:CC,deps:[]},{provide:Ol,useClass:gC,multi:!0,deps:[kt,q,Gn]},{provide:Ol,useClass:DC,multi:!0,deps:[kt]},bh,xh,Sh,{provide:zn,useExisting:bh},{provide:go,useClass:lC,deps:[]},[]];function te(n){this.content=n}te.prototype={constructor:te,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(t||n,e):(o[i+1]=e,t&&(o[i]=t)),new te(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new te(t)},addToStart:function(n,e){return new te([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new te(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,e,t),new te(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=te.from(n),n.size?new te(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=te.from(n),n.size?new te(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=te.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};te.from=function(n){if(n instanceof te)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new te(e)};var Pl=te;function jh(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),o=e.child(r);if(i==o){t+=i.nodeSize;continue}if(!i.sameMarkup(o))return t;if(i.isText&&i.text!=o.text){for(let s=0;i.text[s]==o.text[s];s++)t++;return t}if(i.content.size||o.content.size){let s=jh(i.content,o.content,t+1);if(s!=null)return s}t+=i.nodeSize}}function Hh(n,e,t,r){for(let i=n.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:t,b:r};let s=n.child(--i),a=e.child(--o),l=s.nodeSize;if(s==a){t-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:t,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(s.content.size||a.content.size){let c=Hh(s.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}var y=class n{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,o){for(let s=0,a=0;a<t;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,i+a,o||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let o="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:o+=r),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new n(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),i+=a.nodeSize),s=l}return new n(r,i)}cutByIndex(e,t){return e==t?n.empty:e==0&&t==this.content.length?this:new n(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new n(i,o)}addToStart(e){return new n([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new n(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return jh(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Hh(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Do(0,e);if(e==this.size)return Do(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let o=this.child(r),s=i+o.nodeSize;if(s>=e)return s==e||t>0?Do(r+1,s):Do(r,i);i=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return n.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new n(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return n.empty;let t,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new n(t||e,r)}static from(e){if(!e)return n.empty;if(e instanceof n)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new n([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};y.empty=new y([],0);var Fl={index:0,offset:0};function Do(n,e){return Fl.index=n,Fl.offset=e,Fl}function wo(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!wo(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!wo(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}var _=(()=>{class n{constructor(t,r){this.type=t,this.attrs=r}addToSet(t){let r,i=!1;for(let o=0;o<t.length;o++){let s=t[o];if(this.eq(s))return t;if(this.type.excludes(s.type))r||(r=t.slice(0,o));else{if(s.type.excludes(this.type))return t;!i&&s.type.rank>this.type.rank&&(r||(r=t.slice(0,o)),r.push(this),i=!0),r&&r.push(s)}}return r||(r=t.slice()),i||r.push(this),r}removeFromSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return t.slice(0,r).concat(t.slice(r+1));return t}isInSet(t){for(let r=0;r<t.length;r++)if(this.eq(t[r]))return!0;return!1}eq(t){return this==t||this.type==t.type&&wo(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let r in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let i=t.marks[r.type];if(!i)throw new RangeError(`There is no mark type ${r.type} in this schema`);let o=i.create(r.attrs);return i.checkAttrs(o.attrs),o}static sameSet(t,r){if(t==r)return!0;if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].eq(r[i]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return n.none;if(t instanceof n)return[t];let r=t.slice();return r.sort((i,o)=>i.type.rank-o.type.rank),r}}return n.none=[],n})(),ln=class extends Error{},D=class n{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=zh(this.content,e+this.openStart,t);return r&&new n(r,this.openStart,this.openEnd)}removeBetween(e,t){return new n($h(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return n.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new n(y.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)i++;return new n(e,r,i)}};D.empty=new D(y.empty,0,0);function $h(n,e,t){let{index:r,offset:i}=n.findIndex(e),o=n.maybeChild(r),{index:s,offset:a}=n.findIndex(t);if(i==e||o.isText){if(a!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy($h(o.content,e-i-1,t-i-1)))}function zh(n,e,t,r){let{index:i,offset:o}=n.findIndex(e),s=n.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let a=zh(s.content,e-o-1,t);return a&&n.replaceChild(i,s.copy(a))}function MC(n,e,t){if(t.openStart>n.depth)throw new ln("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new ln("Inconsistent open depths");return Uh(n,e,t,0)}function Uh(n,e,t,r){let i=n.index(r),o=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let s=Uh(n,e,t,r+1);return o.copy(o.content.replaceChild(i,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,a=s.content;return an(s,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=SC(t,n);return an(o,Wh(n,s,a,e,r))}else return an(o,Co(n,e,r))}function qh(n,e){if(!e.type.compatibleContent(n.type))throw new ln("Cannot join "+e.type.name+" onto "+n.type.name)}function Vl(n,e,t){let r=n.node(t);return qh(r,e.node(t)),r}function sn(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function kr(n,e,t,r){let i=(e||n).node(t),o=0,s=e?e.index(t):i.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(sn(n.nodeAfter,r),o++));for(let a=o;a<s;a++)sn(i.child(a),r);e&&e.depth==t&&e.textOffset&&sn(e.nodeBefore,r)}function an(n,e){return n.type.checkContent(e),n.copy(e)}function Wh(n,e,t,r,i){let o=n.depth>i&&Vl(n,e,i+1),s=r.depth>i&&Vl(t,r,i+1),a=[];return kr(null,n,i,a),o&&s&&e.index(i)==t.index(i)?(qh(o,s),sn(an(o,Wh(n,e,t,r,i+1)),a)):(o&&sn(an(o,Co(n,e,i+1)),a),kr(e,t,i,a),s&&sn(an(s,Co(t,r,i+1)),a)),kr(r,null,i,a),new y(a)}function Co(n,e,t){let r=[];if(kr(null,n,t,r),n.depth>t){let i=Vl(n,e,t+1);sn(an(i,Co(n,e,t+1)),r)}return kr(e,null,t,r),new y(r)}function SC(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)i=e.node(o).copy(y.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}var Eo=class n{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return _.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let o=r.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!i||!o[s].isInSet(i.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new cn(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,o=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(r.push(s,a,i+l),!c||(s=s.child(a),s.isText))break;o=c-1,i+=l+1}return new n(t,r,o)}static resolveCached(e,t){let r=kh.get(e);if(r)for(let o=0;o<r.elts.length;o++){let s=r.elts[o];if(s.pos==t)return s}else kh.set(e,r=new Bl);let i=r.elts[r.i]=n.resolve(e,t);return r.i=(r.i+1)%xC,i}},Bl=class{constructor(){this.elts=[],this.i=0}},xC=12,kh=new WeakMap,cn=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},NC=Object.create(null),et=class n{constructor(e,t,r,i=_.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||y.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&wo(this.attrs,t||e.defaultAttrs||NC)&&_.sameSet(this.marks,r||_.none)}copy(e=null){return e==this.content?this:new n(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return D.empty;let i=this.resolve(e),o=this.resolve(t),s=r?0:i.sharedDepth(t),a=i.start(s),c=i.node(s).content.cut(i.pos-a,o.pos-a);return new D(c,i.depth-s,o.depth-s)}replace(e,t,r){return MC(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Eo.resolveCached(this,e)}resolveNoCache(e){return Eo.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Gh(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=y.empty,i=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,i,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<o;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),s=o&&o.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=_.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!_.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=y.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};et.prototype.text=void 0;var jl=class n extends et{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Gh(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Gh(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}var un=class n{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new Hl(e,t);if(r.next==null)return n.empty;let i=Zh(r);r.next&&r.err("Unexpected trailing text");let o=PC(RC(i));return FC(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let o=t;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function o(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return y.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=o(d,a.concat(u));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let s=[];for(let a=i;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)o+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return o}).join(`
`)}};un.empty=new un(!0);var Hl=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function Zh(n){let e=[];do e.push(TC(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function TC(n){let e=[];do e.push(AC(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function AC(n){let e=_C(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=kC(n,e);else break;return e}function Oh(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function kC(n,e){let t=Oh(n),r=t;return n.eat(",")&&(n.next!="}"?r=Oh(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function OC(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let o in t){let s=t[o];s.isInGroup(e)&&i.push(s)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function _C(n){if(n.eat("(")){let e=Zh(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=OC(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function RC(n){let e=[[]];return i(o(n,0),t()),e;function t(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function i(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;i(c,a=t())}else if(s.type=="star"){let l=t();return r(a,l),i(o(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=t();return i(o(s.expr,a),l),i(o(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=t();i(o(s.expr,l),u),l=u}if(s.max==-1)i(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=t();r(l,u),i(o(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Jh(n,e){return e-n}function _h(n,e){let t=[];return r(e),t.sort(Jh);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(i);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&t.indexOf(l)==-1&&r(l)}}}function PC(n){let e=Object.create(null);return t(_h(n,0));function t(r){let i=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);_h(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let o=e[r.join(",")]=new un(r.indexOf(n.length-1)>-1);for(let s=0;s<i.length;s++){let a=i[s][1].sort(Jh);o.next.push({type:i[s][0],next:e[a.join(",")]||t(a)})}return o}}function FC(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],o=!i.validEnd,s=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),r.indexOf(c)==-1&&r.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Kh(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function Yh(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function Qh(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(e[i])}}function Xh(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new $l(n,r,e[r]);return t}var bo=class n{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Xh(e,r.attrs),this.defaultAttrs=Kh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==un.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Yh(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new et(this,this.computeAttrs(e),y.from(t),_.setFrom(r))}createChecked(e=null,t,r){return t=y.from(t),this.checkContent(t),new et(this,this.computeAttrs(e),t,_.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=y.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(y.empty,!0);return o?new et(this,e,t.append(o),_.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Qh(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:_.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,s)=>r[o]=new n(o,t,s));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function LC(n,e,t){let r=t.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}var $l=class{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?LC(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}},_r=class n{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Xh(e,i.attrs),this.excluded=null;let o=Kh(this.attrs);this.instance=o?new _(this,o):null}create(e=null){return!e&&this.instance?this.instance:new _(this,Yh(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((o,s)=>r[o]=new n(o,i++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Qh(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},Io=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Pl.from(e.nodes),t.marks=Pl.from(e.marks||{}),this.nodes=bo.compile(this.spec.nodes,this),this.marks=_r.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[s]||(r[s]=un.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?Rh(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:Rh(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof bo){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new jl(r,r.defaultAttrs,e,_.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return et.fromJSON(this,e)}markFromJSON(e){return _.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function Rh(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],o=n.marks[i],s=o;if(o)t.push(o);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function VC(n){return n.tag!=null}function BC(n){return n.style!=null}var dn=class n{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(VC(i))this.tags.push(i);else if(BC(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new Mo(this,t,!1);return r.addAll(e,_.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Mo(this,t,!0);return r.addAll(e,_.none,t.from,t.to),D.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if($C(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,t,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(s.getAttrs){let l=s.getAttrs(t);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let t=[];function r(i){let o=i.priority==null?50:i.priority,s=0;for(;s<t.length;s++){let a=t[s];if((a.priority==null?50:a.priority)<o)break}t.splice(s,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Fh(s)),s.mark||s.ignore||s.clearMark||(s.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(s=>{r(s=Fh(s)),s.node||s.ignore||s.mark||(s.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new n(e,n.schemaRules(e)))}},ep={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},jC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},tp={ol:!0,ul:!0},Rr=1,zl=2,Or=4;function Ph(n,e,t){return e!=null?(e?Rr:0)|(e==="full"?zl:0):n&&n.whitespace=="pre"?Rr|zl:t&~Or}var Yn=class{constructor(e,t,r,i,o,s){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=_.none,this.match=o||(s&Or?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(y.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Rr)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let t=y.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(y.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ep.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Mo=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,s=Ph(null,t.preserveWhitespace,0)|(r?Or:0);i?o=new Yn(i.type,i.attrs,_.none,!0,t.topMatch||i.type.contentMatch,s):r?o=new Yn(null,null,_.none,!0,null,s):o=new Yn(e.schema.topNodeType,null,_.none,!0,null,s),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,o=i.options&zl?"full":this.localPreserveWS||(i.options&Rr)>0;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)o!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;tp.hasOwnProperty(s)&&this.parser.normalizeLists&&HC(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:jC.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(ep.hasOwnProperty(s))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),c=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let d=l&&l.skip?t:this.readStyles(e,t);d&&this.addAll(e,d),c&&this.sync(o),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],s=r.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(s,t.attrs||null,r,t.preserveWhitespace);l&&(o=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}o&&this.sync(a)&&this.open--}addAll(e,t,r,i){let o=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t){let r,i;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=s,!a.length)||s.solid)break}if(!r)return null;this.sync(i);for(let o=0;o<r.length;o++)t=this.enterInner(r[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=_.none;for(let s of r.concat(e.marks))(i.type?i.type.allowsMarkType(s.type):Lh(s.type,e.type))&&(o=s.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let o=this.findPlace(e.create(t),r);return o&&(o=this.enterInner(e,t,r,!0,i)),o}enterInner(e,t,r,i=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Ph(e,o,s.options);s.options&Or&&s.content.length==0&&(a|=Or);let l=_.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Lh(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Yn(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Rr)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=o?r.node(l-o).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}};function HC(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&tp.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function $C(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Fh(n){let e={};for(let t in n)e[t]=n[t];return e}function Lh(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||o.indexOf(u)<0&&s(u))return!0}};if(s(i.contentMatch))return!0}}var fn=class n{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Ll(t).createDocumentFragment());let i=r,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)i=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,t);u&&(o.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=vo(Ll(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&vo(Ll(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return vo(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new n(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Vh(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Vh(e.marks)}};function Vh(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Ll(n){return n.document||window.document}var Bh=new WeakMap;function zC(n){let e=Bh.get(n);return e===void 0&&Bh.set(n,e=UC(n)),e}function UC(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function vo(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=zC(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=i.indexOf(" ");s>0&&(t=i.slice(0,s),i=i.slice(s+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:p}=vo(n,f,t,r);if(l.appendChild(h),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}var ip=65535,op=Math.pow(2,16);function qC(n,e){return n+e*op}function np(n){return n&ip}function WC(n){return(n-(n&ip))/op}var sp=1,ap=2,So=4,lp=8,Lr=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&lp)>0}get deletedBefore(){return(this.delInfo&(sp|So))>0}get deletedAfter(){return(this.delInfo&(ap|So))>0}get deletedAcross(){return(this.delInfo&So)>0}},ht=class n{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&n.empty)return n.empty}recover(e){let t=0,r=np(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+WC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:t:t,h=l+i+(f<0?0:u);if(r)return h;let p=e==(t<0?l:d)?null:qC(a/3,e-l),g=e==l?ap:e==d?sp:So;return(t<0?e!=l:e!=d)&&(g|=lp),new Lr(h,g,p)}i+=u-c}return r?e+i:new Lr(e+i,0,null)}touches(e,t){let r=0,i=np(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let s=this.ranges[i],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),o+=u-c}}invert(){return new n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?n.empty:new n(e<0?[0,-e,0]:[0,0,e])}};ht.empty=new ht([]);var Vr=class n{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new n(this.maps,this.mirror,e,t)}copy(){return new n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new n;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Lr(e,i,null)}},Ul=Object.create(null),W=class{getMap(){return ht.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ul[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Ul)throw new RangeError("Duplicate use of step JSON ID "+e);return Ul[e]=t,t.prototype.jsonID=e,t}},J=class n{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new n(e,null)}static fail(e){return new n(null,e)}static fromReplace(e,t,r,i){try{return n.ok(e.replace(t,r,i))}catch(o){if(o instanceof ln)return n.fail(o.message);throw o}}};function Jl(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Jl(o.content,e,o))),o.isInline&&(o=e(o,t,i)),r.push(o)}return y.fromArray(r)}var Br=class n extends W{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new D(Jl(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),i),t.openStart,t.openEnd);return J.fromReplace(e,this.from,this.to,o)}invert(){return new hn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};W.jsonID("addMark",Br);var hn=class n extends W{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new D(Jl(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return J.fromReplace(e,this.from,this.to,r)}invert(){return new Br(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};W.jsonID("removeMark",hn);var jr=class n extends W{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return J.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return J.fromReplace(e,this.pos,this.pos+1,new D(y.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new n(this.pos,t.marks[i]);return new n(this.pos,this.mark)}}return new Hr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};W.jsonID("addNodeMark",jr);var Hr=class n extends W{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return J.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return J.fromReplace(e,this.pos,this.pos+1,new D(y.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new jr(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};W.jsonID("removeNodeMark",Hr);var Me=class n extends W{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Gl(e,this.from,this.to)?J.fail("Structure replace would overwrite content"):J.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ht([this.from,this.to-this.from,this.slice.size])}invert(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?D.empty:new D(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?D.empty:new D(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,D.fromJSON(e,t.slice),!!t.structure)}};W.jsonID("replace",Me);var G=class n extends W{constructor(e,t,r,i,o,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Gl(e,this.from,this.gapFrom)||Gl(e,this.gapTo,this.to)))return J.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return J.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?J.fromReplace(e,this.from,this.to,r):J.fail("Content does not fit in gap")}getMap(){return new ht([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||o>r.pos?null:new n(t.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,D.fromJSON(e,t.slice),t.insert,!!t.structure)}};W.jsonID("replaceAround",G);function Gl(n,e,t){let r=n.resolve(e),i=t-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let s=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function GC(n,e,t,r){let i=[],o=[],s,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,t),p=r.addToSet(d);for(let g=0;g<d.length;g++)d[g].isInSet(p)||(s&&s.to==f&&s.mark.eq(d[g])?s.to=h:i.push(s=new hn(f,h,d[g])));a&&a.to==f?a.to=h:o.push(a=new Br(f,h,r))}}),i.forEach(l=>n.step(l)),o.forEach(l=>n.step(l))}function ZC(n,e,t,r){let i=[],o=0;n.doc.nodesBetween(e,t,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(r instanceof _r){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==o-1&&d.eq(i[h].style)&&(f=p)}f?(f.to=c,f.step=o):i.push({style:d,from:Math.max(a,e),to:c,step:o})}}}),i.forEach(s=>n.step(new hn(s.from,s.to,s.style)))}function JC(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),o=[],s=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=s+l.nodeSize,u=r.matchType(l.type);if(!u)o.push(new Me(s,c,D.empty));else{r=u;for(let d=0;d<l.marks.length;d++)t.allowsMarkType(l.marks[d].type)||n.step(new hn(s,c,l.marks[d]));if(l.isText&&!t.spec.code){let d,f=/\r?\n|\r/g,h;for(;d=f.exec(l.text);)h||(h=new D(y.from(t.schema.text(" ",t.allowedMarks(l.marks))),0,0)),o.push(new Me(s+d.index,s+d.index+d[0].length,h))}}s=c}if(!r.validEnd){let a=r.fillBefore(y.empty,!0);n.replace(s,s,new D(a,0,0))}for(let a=o.length-1;a>=0;a--)n.step(o[a])}function KC(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function pn(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),o=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(o,s,t))return r;if(r==0||i.type.spec.isolating||!KC(i,o,s))break}return null}function YC(n,e,t){let{$from:r,$to:i,depth:o}=e,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=y.empty,d=0;for(let p=o,g=!1;p>t;p--)g||r.index(p)>0?(g=!0,u=y.from(r.node(p).copy(u)),d++):l--;let f=y.empty,h=0;for(let p=o,g=!1;p>t;p--)g||i.after(p+1)<i.end(p)?(g=!0,f=y.from(i.node(p).copy(f)),h++):c++;n.step(new G(l,c,s,a,new D(u.append(f),d,h),u.size-d,!0))}function Xn(n,e,t=null,r=n){let i=QC(n,e),o=i&&XC(r,e);return o?i.map(rp).concat({type:e,attrs:t}).concat(o.map(rp)):null}function rp(n){return{type:n,attrs:null}}function QC(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return t.canReplaceWith(r,i,s)?o:null}function XC(n,e){let{parent:t,startIndex:r,endIndex:i}=n,o=t.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:s}function eE(n,e,t){let r=y.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let a=t[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=y.from(t[s].type.create(t[s].attrs,r))}let i=e.start,o=e.end;n.step(new G(i,o,i,o,new D(r,0,0),t.length,!0))}function tE(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(s,a)=>{if(s.isTextblock&&!s.hasMarkup(r,i)&&nE(n.doc,n.mapping.slice(o).map(a),r)){n.clearIncompatible(n.mapping.slice(o).map(a,1),r);let l=n.mapping.slice(o),c=l.map(a,1),u=l.map(a+s.nodeSize,1);return n.step(new G(c,u,c+1,u-1,new D(y.from(r.create(i,null,s.marks)),0,0),1,!0)),!1}})}function nE(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function rE(n,e,t,r,i){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let s=t.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,s);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new G(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new D(y.from(s),0,0),1,!0))}function Ot(n,e,t=1,r){let i=n.resolve(e),o=i.depth-t,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>o;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let g=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!g.type.validContent(h))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function iE(n,e,t=1,r){let i=n.doc.resolve(e),o=y.empty,s=y.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){o=y.from(i.node(a).copy(o));let u=r&&r[c];s=y.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}n.step(new Me(e,e,new D(o.append(s),t,t),!0))}function pt(n,e){let t=n.resolve(e),r=t.index();return cp(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function cp(n,e){return!!(n&&e&&!n.isLeaf&&n.canAppend(e))}function Kl(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let o,s,a=r.index(i);if(i==r.depth?(o=r.nodeBefore,s=r.nodeAfter):t>0?(o=r.node(i+1),a++,s=r.node(i).maybeChild(a)):(o=r.node(i).maybeChild(a-1),s=r.node(i+1)),o&&!o.isTextblock&&cp(o,s)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function oE(n,e,t){let r=new Me(e-t,e+t,D.empty,!0);n.step(r)}function sE(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,t))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,t))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Ao(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let o=0;o<t.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(o==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function ko(n,e,t=e,r=D.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),o=n.resolve(t);return up(i,o,r)?new Me(e,t,r):new Zl(i,o,r).fit()}function up(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}var Zl=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=y.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=y.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,s=r.depth,a=i.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new D(o,s,a);return e>-1?new G(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Me(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ql(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let s=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(s?c.matchType(s.type)||(d=c.fillBefore(y.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:d};if(t==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:u};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ql(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new D(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=ql(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new D(Pr(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new D(Pr(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let g=a.child(c),m=d.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(d=m,u.push(dp(g.mark(f.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?h:-1)))}let p=c==a.childCount;p||(h=-1),this.placed=Fr(this.placed,t,y.from(u)),this.frontier[t].match=d,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<h;g++){let v=m.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),m=v.content}this.unplaced=p?e==0?D.empty:new D(Pr(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new D(Pr(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Wl(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=Wl(e,t,i,r,o);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Wl(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Fr(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Fr(this.placed,this.depth,y.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(y.empty,!0);t.childCount&&(this.placed=Fr(this.placed,this.frontier.length,t))}};function Pr(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Pr(n.firstChild.content,e-1,t)))}function Fr(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Fr(n.lastChild.content,e-1,t)))}function ql(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function dp(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,dp(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(y.empty,!0)))),n.copy(r)}function Wl(n,e,t,r,i){let o=n.node(e),s=i?n.indexAfter(e):n.index(e);if(s==o.childCount&&!t.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!aE(t,o.content,s)?a:null}function aE(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function lE(n){return n.spec.defining||n.spec.definingForContent}function cE(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),o=n.doc.resolve(t);if(up(i,o,r))return n.step(new Me(e,t,r));let s=hp(i,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(f)>-1?a=f:i.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content}for(let f=u-1;f>=0;f--){let h=c[f],p=lE(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(a)-1)))u=f;else if(p||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),p=c[h];if(p)for(let g=0;g<s.length;g++){let m=s[(g+l)%s.length],v=!0;m<0&&(v=!1,m=-m);let T=i.node(m-1),U=i.index(m-1);if(T.canReplaceWith(U,U,p.type,p.marks))return n.replace(i.before(m),v?o.after(m):t,new D(fp(r.content,0,r.openStart,h),h,r.openEnd))}}let d=n.steps.length;for(let f=s.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>d));f--){let h=s[f];h<0||(e=i.before(h),t=o.after(h))}}function fp(n,e,t,r,i){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(fp(o.content,e+1,t,r,o)))}if(e>r){let o=i.contentMatchAt(0),s=o.fillBefore(n).append(n);n=s.append(o.matchFragment(s).fillBefore(y.empty,!0))}return n}function uE(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=sE(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new D(y.from(r),0,0))}function dE(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),o=hp(r,i);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&i.end(s)-t!=i.depth-s)return n.delete(r.before(s),t);n.delete(e,t)}function hp(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&t.push(i)}return t}var xo=class n extends W{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return J.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return J.fromReplace(e,this.pos,this.pos+1,new D(y.from(i),0,t.isLeaf?0:1))}getMap(){return ht.empty}invert(e){return new n(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(t.pos,t.attr,t.value)}};W.jsonID("attr",xo);var No=class n extends W{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return J.ok(r)}getMap(){return ht.empty}invert(e){return new n(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(t.attr,t.value)}};W.jsonID("docAttr",No);var Qn=class extends Error{};Qn=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Qn.prototype=Object.create(Error.prototype);Qn.prototype.constructor=Qn;Qn.prototype.name="TransformError";var To=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vr}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Qn(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=D.empty){let i=ko(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new D(y.from(r),0,0))}delete(e,t){return this.replace(e,t,D.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return cE(this,e,t,r),this}replaceRangeWith(e,t,r){return uE(this,e,t,r),this}deleteRange(e,t){return dE(this,e,t),this}lift(e,t){return YC(this,e,t),this}join(e,t=1){return oE(this,e,t),this}wrap(e,t){return eE(this,e,t),this}setBlockType(e,t=e,r,i=null){return tE(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return rE(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new xo(e,t,r)),this}setDocAttribute(e,t){return this.step(new No(e,t)),this}addNodeMark(e,t){return this.step(new jr(e,t)),this}removeNodeMark(e,t){if(!(t instanceof _)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Hr(e,t)),this}split(e,t=1,r){return iE(this,e,t,r),this}addMark(e,t,r){return GC(this,e,t,r),this}removeMark(e,t,r){return ZC(this,e,t,r),this}clearIncompatible(e,t,r){return JC(this,e,t,r),this}};var Yl=Object.create(null),E=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Xl(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=D.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(o);e.replaceRange(u.map(l.pos),u.map(c.pos),a?D.empty:t),a==0&&mp(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:s,$to:a}=i[o],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),mp(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new k(e):er(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let s=t<0?er(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):er(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Se(e.node(0))}static atStart(e){return er(e,e,0,0,1)||new Se(e)}static atEnd(e){return er(e,e,e.content.size,e.childCount,-1)||new Se(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Yl[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Yl)throw new RangeError("Duplicate use of selection JSON ID "+e);return Yl[e]=t,t.prototype.jsonID=e,t}getBookmark(){return k.between(this.$anchor,this.$head).getBookmark()}};E.prototype.visible=!0;var Xl=class{constructor(e,t){this.$from=e,this.$to=t}},pp=!1;function gp(n){!pp&&!n.parent.inlineContent&&(pp=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}var k=class n extends E{constructor(e,t=e){gp(e),gp(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return E.near(r);let i=e.resolve(t.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}replace(e,t=D.empty){if(super.replace(e,t),t==D.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _o(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let o=E.findFrom(t,r,!0)||E.findFrom(t,-r,!0);if(o)t=o.$head;else return E.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(E.findFrom(e,-r,!0)||E.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new n(e,t)}};E.jsonID("text",k);var _o=class n{constructor(e,t){this.anchor=e,this.head=t}map(e){return new n(e.map(this.anchor),e.map(this.head))}resolve(e){return k.between(e.resolve(this.anchor),e.resolve(this.head))}},w=class n extends E{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return r?E.near(o):new n(o)}content(){return new D(y.from(this.node),0,0)}eq(e){return e instanceof n&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ec(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}static create(e,t){return new n(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};w.prototype.visible=!1;E.jsonID("node",w);var ec=class n{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new _o(r,r):new n(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&w.isSelectable(r)?new w(t):E.near(t)}},Se=class n extends E{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=D.empty){if(t==D.empty){e.delete(0,e.doc.content.size);let r=E.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new n(e)}map(e){return new n(e)}eq(e){return e instanceof n}getBookmark(){return fE}};E.jsonID("all",Se);var fE={map(){return this},resolve(n){return new Se(n)}};function er(n,e,t,r,i,o=!1){if(e.inlineContent)return k.create(n,t);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let a=e.child(s);if(a.isAtom){if(!o&&w.isSelectable(a))return w.create(n,t-(i<0?a.nodeSize:0))}else{let l=er(n,a,t+i,i<0?a.childCount:0,i,o);if(l)return l}t+=a.nodeSize*i}return null}function mp(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Me||i instanceof G))return;let o=n.mapping.maps[r],s;o.forEach((a,l,c,u)=>{s==null&&(s=u)}),n.setSelection(E.near(n.doc.resolve(s),t))}var yp=1,Oo=2,Dp=4,tc=class extends To{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|yp)&~Oo,this.storedMarks=null,this}get selectionSet(){return(this.updated&yp)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Oo,this}ensureMarks(e){return _.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Oo)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Oo,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||_.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let s=this.doc.resolve(t);o=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,o)),this.selection.empty||this.setSelection(E.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Dp,this}get scrolledIntoView(){return(this.updated&Dp)>0}};function vp(n,e){return!e||!n?n:n.bind(e)}var gn=class{constructor(e,t,r){this.name=e,this.init=vp(t.init,r),this.apply=vp(t.apply,r)}},hE=[new gn("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new gn("selection",{init(n,e){return n.selection||E.atStart(e.doc)},apply(n){return n.selection}}),new gn("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new gn("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})],$r=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=hE.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new gn(r.key,r.spec.state,r))})}},Ro=class n{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=i?i[s].n:0,c=i?i[s].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<s?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),o=!0}i&&(i[s]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new n(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new tc(this)}static create(e){let t=new $r(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new n(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new $r(this.schema,e.plugins),r=t.fields,i=new n(t);for(let o=0;o<r.length;o++){let s=r[o].name;i[s]=this.hasOwnProperty(s)?this[s]:r[o].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new $r(e.schema,e.plugins),o=new n(i);return i.fields.forEach(s=>{if(s.name=="doc")o.doc=et.fromJSON(e.schema,t.doc);else if(s.name=="selection")o.selection=E.fromJSON(o.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){o[s.name]=c.fromJSON.call(l,e,t[a],o);return}}o[s.name]=s.init(e,o)}}),o}};function wp(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=wp(i,e,{})),t[r]=i}return t}var z=class{constructor(e){this.spec=e,this.props={},e.props&&wp(e.props,this,this.props),this.key=e.key?e.key.key:Cp("plugin")}getState(e){return e[this.key]}},Ql=Object.create(null);function Cp(n){return n in Ql?n+"$"+ ++Ql[n]:(Ql[n]=0,n+"$")}var zr=class{constructor(e="key"){this.key=Cp(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var K=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Gr=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e},ac=null,mt=function(n,e,t){let r=ac||(ac=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},pE=function(){ac=null},En=function(n,e,t,r){return t&&(Ep(n,e,t,r,-1)||Ep(n,e,t,r,1))},gE=/^(img|br|input|textarea|hr)$/i;function Ep(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Re(n))){let o=n.parentNode;if(!o||o.nodeType!=1||Yr(n)||gE.test(n.nodeName)||n.contentEditable=="false")return!1;e=K(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Re(n):0}else return!1}}function Re(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function mE(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Re(n)}else if(n.parentNode&&!Yr(n))e=K(n),n=n.parentNode;else return null}}function yE(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!Yr(n))e=K(n)+1,n=n.parentNode;else return null}}function DE(n,e,t){for(let r=e==0,i=e==Re(n);r||i;){if(n==t)return!0;let o=K(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Re(n)}}function Yr(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}var Wo=function(n){return n.focusNode&&En(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function mn(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function vE(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function wE(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Re(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Re(r.startContainer),r.startOffset)}}}var tt=typeof navigator<"u"?navigator:null,bp=typeof document<"u"?document:null,Vt=tt&&tt.userAgent||"",lc=/Edge\/(\d+)/.exec(Vt),tg=/MSIE \d/.exec(Vt),cc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vt),we=!!(tg||cc||lc),Ft=tg?document.documentMode:cc?+cc[1]:lc?+lc[1]:0,Ue=!we&&/gecko\/(\d+)/i.test(Vt);Ue&&+(/Firefox\/(\d+)/.exec(Vt)||[0,0])[1];var uc=!we&&/Chrome\/(\d+)/.exec(Vt),re=!!uc,ng=uc?+uc[1]:0,ce=!we&&!!tt&&/Apple Computer/.test(tt.vendor),or=ce&&(/Mobile\/\w+/.test(Vt)||!!tt&&tt.maxTouchPoints>2),_e=or||(tt?/Mac/.test(tt.platform):!1),CE=tt?/Win/.test(tt.platform):!1,yt=/Android \d/.test(Vt),Qr=!!bp&&"webkitFontSmoothing"in bp.documentElement.style,EE=Qr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function bE(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function gt(n,e){return typeof n=="number"?n:n[e]}function IE(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ip(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let s=t||n.dom;s;s=Gr(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,c=l?bE(o):IE(a),u=0,d=0;if(e.top<c.top+gt(r,"top")?d=-(c.top-e.top+gt(i,"top")):e.bottom>c.bottom-gt(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+gt(i,"top")-c.top:e.bottom-c.bottom+gt(i,"bottom")),e.left<c.left+gt(r,"left")?u=-(c.left-e.left+gt(i,"left")):e.right>c.right-gt(r,"right")&&(u=e.right-c.right+gt(i,"right")),u||d)if(l)o.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,h=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let p=a.scrollLeft-f,g=a.scrollTop-h;e={left:e.left-p,top:e.top-g,right:e.right-p,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function ME(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=n.root.elementFromPoint(o,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:rg(n.dom)}}function rg(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Gr(r));return e}function SE({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;ig(t,r==0?0:r-e)}function ig(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:o}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}var tr=null;function xE(n){if(n.setActive)return n.setActive();if(tr)return n.focus(tr);let e=rg(n);n.focus(tr==null?{get preventScroll(){return tr={preventScroll:!0},!0}}:void 0),tr||(tr=!1,ig(e,0))}function og(n,e){let t,r=2e8,i,o=0,s=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=mt(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let g=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(g<r){t=u,r=g,i=g&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&g&&(o=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=d+1)}}return!t&&l&&(t=l,i=c,r=0),t&&t.nodeType==3?NE(t,i):!t||r&&t.nodeType==1?{node:n,offset:o}:og(t,i)}function NE(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=_t(r,1);if(o.top!=o.bottom&&Mc(e,o))return{node:n,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Mc(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function TE(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function AE(n,e,t){let{node:r,offset:i}=og(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();o=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function kE(n,e,t,r){let i=-1;for(let o=e,s=!1;o!=n.dom;){let a=n.docView.nearestDesc(o,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?i=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),s=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function sg(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=i;;){let s=n.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Mc(e,c))return sg(s,e,c)}}if((o=(o+1)%r)==i)break}return n}function OE(n,e){let t=n.dom.ownerDocument,r,i=0,o=wE(t,e.left,e.top);o&&({node:r,offset:i}=o);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!Mc(e,c)||(s=sg(n.dom,e,c),!s))return null}if(ce)for(let c=s;r&&c;c=Gr(c))c.draggable&&(r=void 0);if(s=TE(s,e),r){if(Ue&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Qr&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=kE(n,r,i,e))}a==null&&(a=AE(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Mp(n){return n.top<n.bottom||n.left<n.right}function _t(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Mp(r))return r}return Array.prototype.find.call(t,Mp)||n.getBoundingClientRect()}var _E=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ag(n,e,t){let{node:r,offset:i,atom:o}=n.docView.domFromPos(e,t<0?-1:1),s=Qr||Ue;if(r.nodeType==3)if(s&&(_E.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=_t(mt(r,i,i),t);if(Ue&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=_t(mt(r,i-1,i-1),-1);if(c.top==l.top){let u=_t(mt(r,i,i+1),-1);if(u.top!=l.top)return Ur(u,u.left<c.left)}}return l}else{let l=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==r.nodeValue.length?(l--,u=1):t<0?l--:c++,Ur(_t(mt(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(t<0||i==Re(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return nc(l.getBoundingClientRect(),!1)}if(o==null&&i<Re(r)){let l=r.childNodes[i];if(l.nodeType==1)return nc(l.getBoundingClientRect(),!0)}return nc(r.getBoundingClientRect(),t>=0)}if(o==null&&i&&(t<0||i==Re(r))){let l=r.childNodes[i-1],c=l.nodeType==3?mt(l,Re(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ur(_t(c,1),!1)}if(o==null&&i<Re(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?mt(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ur(_t(c,-1),!0)}return Ur(_t(r.nodeType==3?mt(r):r,-t),t>=0)}function Ur(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function nc(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function lg(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function RE(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return lg(n,e,()=>{let{node:o}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=ag(n,i.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=mt(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}var PE=/[\u0590-\u08ac]/;function FE(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=n.domSelection();return a?!PE.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?o:s:lg(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:g}=n.domSelectionRange(),m=p&&!h.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==g;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),m}):r.pos==r.start()||r.pos==r.end()}var Sp=null,xp=null,Np=!1;function LE(n,e,t){return Sp==e&&xp==t?Np:(Sp=e,xp=t,Np=t=="up"||t=="down"?RE(n,e,t):FE(n,e,t))}var Pe=0,Tp=1,yn=2,nt=3,bn=class{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Pe,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,s;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>K(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),s;if(o&&(!t||o.node))if(r&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let s=this.children[r],a=o+s.size;if(a>e||s instanceof Lo){i=e-o;break}o=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Po&&o.side>=0;r--);if(t<=0){let o,s=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,s=!1);return o&&t&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?K(o.dom)+1:0}}else{let o,s=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?K(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(i==-1&&e<=c){let u=s+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=K(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=K(d.dom);break}t+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let o=Math.min(e,t),s=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let g=this.children[h],m=p+g.size;if(o>p&&s<m)return g.setSelection(e-p-g.border,t-p-g.border,r,i);p=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Ue||ce)&&e==t){let{node:h,offset:p}=a;if(h.nodeType==3){if(d=!!(p&&h.nodeValue[p-1]==`
`),d&&p==h.nodeValue.length)for(let g=h,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:K(m)+1});break}let v=g.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let g=h.childNodes[p-1];d=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(Ue&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&ce)&&En(a.node,a.offset,u.anchorNode,u.anchorOffset)&&En(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==t)&&!d){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>t){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],s=r+o.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let a=r+o.border,l=s-o.border;if(e>=a&&t<=l){this.dirty=e==r||t==s?yn:Tp,e==a&&t==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=nt:o.markDirty(e-a,t-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?yn:nt}r=s}this.dirty=yn}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?yn:Tp;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}},Po=class extends bn{constructor(e,t,r,i){let o,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Pe&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},dc=class extends bn{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},sr=class n extends bn{constructor(e,t,r,i,o){super(e,[],r,i),this.mark=t,this.spec=o}static create(e,t,r,i){let o=i.nodeViews[t.type.name],s=o&&o(t,i,r);return(!s||!s.dom)&&(s=fn.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new n(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&nt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=nt&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Pe){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Pe}}slice(e,t,r){let i=n.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;t<s&&(o=gc(o,t,s,r)),e>0&&(o=gc(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}},Lt=class n extends bn{constructor(e,t,r,i,o,s,a,l,c){super(e,[],o,s),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,o,s){let a=o.nodeViews[t.type.name],l,c=a&&a(t,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=fn.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let f=u;return u=dg(u,r,t),c?l=new fc(e,t,r,i,u,d||null,f,c,o,s+1):t.isText?new Fo(e,t,r,i,u,f,o):new n(e,t,r,i,u,d||null,f,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>y.empty)}return e}matchesNode(e,t,r){return this.dirty==Pe&&e.eq(this.node)&&Vo(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new pc(this,s&&s.node,e);HE(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?_.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==yn)&&(s&&this.protectLocalComposition(e,s),cg(this.contentDOM,this.children,e),or&&$E(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof k)||r<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=zE(this.node.content,s,r-t,i-t);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new dc(this,o,t,i);e.input.compositionNodes.push(s),this.children=gc(this.children,r,r+i.length,e,s)}update(e,t,r,i){return this.dirty==nt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Pe}updateOuterDeco(e){if(Vo(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ug(this.dom,this.nodeDOM,hc(this.outerDeco,this.node,t),hc(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function Ap(n,e,t,r,i){dg(r,e,n);let o=new Lt(void 0,n,e,t,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}var Fo=class n extends Lt{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==nt||this.dirty!=Pe&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Pe||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Pe,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=nt)}get domAtom(){return!1}isText(e){return this.node.text==e}},Lo=class extends bn{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Pe&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},fc=class extends Lt{constructor(e,t,r,i,o,s,a,l,c,u){super(e,t,r,i,o,s,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==nt)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function cg(n,e,t){let r=n.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=kp(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(s instanceof sr){let l=r?r.previousSibling:n.lastChild;cg(s.contentDOM,s.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=kp(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}var qr=function(n){n&&(this.nodeName=n)};qr.prototype=Object.create(null);var Dn=[new qr];function hc(n,e,t){if(n.length==0)return Dn;let r=t?Dn[0]:new qr,i=[r];for(let o=0;o<n.length;o++){let s=n[o].type.attrs;if(s){s.nodeName&&i.push(r=new qr(s.nodeName));for(let a in s){let l=s[a];l!=null&&(t&&i.length==1&&i.push(r=new qr(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function ug(n,e,t,r){if(t==Dn&&r==Dn)return e;let i=e;for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(o){let l;a&&a.nodeName==s.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Dn[0]),i=l}VE(i,a||Dn[0],s)}return i}function VE(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function dg(n,e,t){return ug(n,n,Dn,hc(e,t,n.nodeType!=1))}function Vo(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function kp(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}var pc=class{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=BE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;i<s&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Pe,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=sr.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,i){let o=-1,s;if(i>=this.preMatch.index&&(s=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,i,o){let s=this.top.children[i];return s.dirty==nt&&s.dom==s.contentDOM&&(s.dirty=yn),s.update(e,t,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Lt){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=nt&&Vo(t,l.outerDeco));if(!f&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,t,r,i,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=yn,d.updateChildren(i,s+1),d.dirty=Pe),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Vo(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Lt.create(this.top,t,r,i,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,o){let s=Lt.create(this.top,e,t,r,i,o);s.contentDOM&&s.updateChildren(i,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Po(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof sr;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Fo)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((ce||re)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Lo(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function BE(n,e){let t=e,r=t.children.length,i=n.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof sr)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function jE(n,e){return n.type.side-e.type.side}function HE(n,e,t,r){let i=e.locals(n),o=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(o,u),c),o+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<i.length&&i[s].to==o;){let m=i[s++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(jE);for(let m=0;m<d.length;m++)t(d[m],c,!!l)}else t(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<n.childCount)h=c,f=n.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=o&&a.splice(m--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let p=o+f.nodeSize;if(f.isText){let m=p;s<i.length&&i[s].from<m&&(m=i[s].from);for(let v=0;v<a.length;v++)a[v].to<m&&(m=a[v].to);m<p&&(l=f.cut(m-o),f=f.cut(0,m-o),p=m,h=-1)}else for(;s<i.length&&i[s].to<p;)s++;let g=f.isInline&&!f.isLeaf?a.filter(m=>!m.inline):a.slice();r(f,g,e.forChild(o,f),h),o=p}}function $E(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function zE(n,e,t,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let s=n.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<n.childCount;){let c=n.child(i++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=t){if(o>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function gc(n,e,t,r,i){let o=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],c=a,u=a+=l.size;c>=t||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>t&&o.push(l.slice(t-c,l.size,r)))}return o}function Sc(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),o=i&&i.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(Wo(t)){for(l=s;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&w.isSelectable(d)&&i.parent&&!(d.isInline&&DE(t.focusNode,t.focusOffset,i.dom))){let f=i.posBefore;c=new w(s==f?a:r.resolve(f))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let d=s,f=s;for(let h=0;h<t.rangeCount;h++){let p=t.getRangeAt(h);d=Math.min(d,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),f=Math.max(f,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=f==n.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||n.state.selection.head<a.pos&&!o?1:-1;c=xc(n,u,a,d)}return c}function fg(n){return n.editable?n.hasFocus():pg(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Dt(n,e=!1){let t=n.state.selection;if(hg(n,t),!!fg(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&re){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&En(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)qE(n);else{let{anchor:r,head:i}=t,o,s;Op&&!(t instanceof k)&&(t.$from.parent.inlineContent||(o=_p(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=_p(n,t.to))),n.docView.setSelection(r,i,n,e),Op&&(o&&Rp(o),s&&Rp(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&UE(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}var Op=ce||re&&ng<63;function _p(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(ce&&i&&i.contentEditable=="false")return rc(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return rc(i);if(o)return rc(o)}}function rc(n){return n.contentEditable="true",ce&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Rp(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function UE(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!fg(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function qE(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,K(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&we&&Ft<=11&&(r.disabled=!0,r.disabled=!1)}function hg(n,e){if(e instanceof w){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Pp(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Pp(n)}function Pp(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function xc(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||k.between(e,t,r)}function Fp(n){return n.editable&&!n.hasFocus()?!1:pg(n)}function pg(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function WE(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return En(e.node,e.offset,t.anchorNode,t.anchorOffset)}function mc(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return o&&E.findFrom(o,e)}function Rt(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Lp(n,e,t){let r=n.state.selection;if(r instanceof k)if(t.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=n.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return Rt(n,new k(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=mc(n.state,e);return i&&i instanceof w?Rt(n,i):!1}else if(!(_e&&t.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?w.isSelectable(o)?Rt(n,new w(e<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):Qr?Rt(n,new k(n.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof w&&r.node.isInline)return Rt(n,new k(e>0?r.$to:r.$from));{let i=mc(n.state,e);return i?Rt(n,i):!1}}}function Bo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Wr(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function nr(n,e){return e<0?GE(n):ZE(n)}function GE(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,o,s=!1;for(Ue&&t.nodeType==1&&r<Bo(t)&&Wr(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Wr(a,-1))i=t,o=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(gg(t))break;{let a=t.previousSibling;for(;a&&Wr(a,-1);)i=t.parentNode,o=K(a),a=a.previousSibling;if(a)t=a,r=Bo(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?yc(n,t,r):i&&yc(n,i,o)}function ZE(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=Bo(t),o,s;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Wr(a,1))o=t,s=++r;else break}else{if(gg(t))break;{let a=t.nextSibling;for(;a&&Wr(a,1);)o=a.parentNode,s=K(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=Bo(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}o&&yc(n,o,s)}function gg(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function JE(n,e){for(;n&&e==n.childNodes.length&&!Yr(n);)e=K(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function KE(n,e){for(;n&&!e&&!Yr(n);)e=K(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function yc(n,e,t){if(e.nodeType!=3){let o,s;(s=JE(e,t))?(e=s,t=0):(o=KE(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Wo(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Dt(n)},50)}function Vp(n,e){let t=n.state.doc.resolve(e);if(!(re||CE)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>i.top&&s<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Bp(n,e,t){let r=n.state.selection;if(r instanceof k&&!r.empty||t.indexOf("s")>-1||_e&&t.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=mc(n.state,e);if(s&&s instanceof w)return Rt(n,s)}if(!i.parent.inlineContent){let s=e<0?i:o,a=r instanceof Se?E.near(s,e):E.findFrom(s,e);return a?Rt(n,a):!1}return!1}function jp(n,e){if(!(n.state.selection instanceof k))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let s=n.state.tr;return e<0?s.delete(t.pos-o.nodeSize,t.pos):s.delete(t.pos,t.pos+o.nodeSize),n.dispatch(s),!0}return!1}function Hp(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function YE(n){if(!ce||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Hp(n,r,"true"),setTimeout(()=>Hp(n,r,"false"),20)}return!1}function QE(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function XE(n,e){let t=e.keyCode,r=QE(e);if(t==8||_e&&t==72&&r=="c")return jp(n,-1)||nr(n,-1);if(t==46&&!e.shiftKey||_e&&t==68&&r=="c")return jp(n,1)||nr(n,1);if(t==13||t==27)return!0;if(t==37||_e&&t==66&&r=="c"){let i=t==37?Vp(n,n.state.selection.from)=="ltr"?-1:1:-1;return Lp(n,i,r)||nr(n,i)}else if(t==39||_e&&t==70&&r=="c"){let i=t==39?Vp(n,n.state.selection.from)=="ltr"?1:-1:1;return Lp(n,i,r)||nr(n,i)}else{if(t==38||_e&&t==80&&r=="c")return Bp(n,-1,r)||nr(n,-1);if(t==40||_e&&t==78&&r=="c")return YE(n)||Bp(n,1,r)||nr(n,1);if(r==(_e?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function mg(n,e){n.someProp("transformCopied",h=>{e=h(e,n)});let t=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=n.someProp("clipboardSerializer")||fn.fromSchema(n.state.schema),a=Eg(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Cg[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=a.createElement(u[h]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function yg(n,e,t,r,i){let o=i.parent.type.spec.code,s,a;if(!t&&!e)return null;let l=e&&(r||o||!t);if(l){if(n.someProp("transformPastedText",f=>{e=f(e,o||r,n)}),o)return e?new D(y.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):D.empty;let d=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(d)a=d;else{let f=i.marks(),{schema:h}=n.state,p=fn.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=s.appendChild(document.createElement("p"));g&&m.appendChild(p.serializeNode(h.text(g,f)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),s=rb(t),Qr&&ib(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||dn.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!eb.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=ob($p(a,+u[1],+u[2]),u[4]);else if(a=D.maxOpen(tb(a.content,i),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=$p(a,d,f)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}var eb=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function tb(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),o,s=[];if(n.forEach(a=>{if(!s)return;let l=i.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&vg(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=wg(s[s.length-1],o.length));let u=Dg(a,l);s.push(u),i=i.matchType(u.type),o=l}}),s)return y.from(s)}return n}function Dg(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,y.from(n));return n}function vg(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let o=vg(n,e,t,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(y.from(Dg(t,n,i+1))))}}function wg(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,wg(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(y.empty,!0);return n.copy(t.append(r))}function Dc(n,e,t,r,i,o){let s=e<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(o=0),i<r-1&&(a=Dc(a,e,t,r,i+1,o)),i>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(y.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(a))}function $p(n,e,t){return e<n.openStart&&(n=new D(Dc(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new D(Dc(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}var Cg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},zp=null;function Eg(){return zp||(zp=document.implementation.createHTMLDocument("title"))}var ic=null;function nb(n){let e=window.trustedTypes;return e?(ic||(ic=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ic.createHTML(n)):n}function rb(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=Eg().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&Cg[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=nb(n),i)for(let o=0;o<i.length;o++)t=t.querySelector(i[o])||t;return t}function ib(n){let e=n.querySelectorAll(re?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function ob(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:o,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=y.from(l.create(r[a+1],i)),o++,s++}return new D(i,o,s)}var ue={},de={},sb={touchstart:!0,touchmove:!0},vc=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function ab(n){for(let e in ue){let t=ue[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{cb(n,r)&&!Nc(n,r)&&(n.editable||!(r.type in de))&&t(n,r)},sb[e]?{passive:!0}:void 0)}ce&&n.dom.addEventListener("input",()=>null),wc(n)}function Pt(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function lb(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function wc(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Nc(n,r))})}function Nc(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function cb(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function ub(n,e){!Nc(n,e)&&ue[e.type]&&(n.editable||!(e.type in de))&&ue[e.type](n,e)}de.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!Ig(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(yt&&re&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),or&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,mn(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||XE(n,t)?t.preventDefault():Pt(n,"key")};de.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};de.keypress=(n,e)=>{let t=e;if(Ig(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||_e&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof k)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",o=>o(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function Go(n){return{left:n.clientX,top:n.clientY}}function db(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Tc(n,e,t,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(n.someProp(e,a=>s>o.depth?a(n,t,o.nodeAfter,o.before(s),i,!0):a(n,t,o.node(s),o.before(s),i,!1)))return!0;return!1}function ir(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r)}function fb(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&w.isSelectable(r)?(ir(n,new w(t),"pointer"),!0):!1}function hb(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof w&&(r=t.node);let o=n.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(w.isSelectable(a)){r&&t.$from.depth>0&&s>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?i=o.before(t.$from.depth):i=o.before(s);break}}return i!=null?(ir(n,w.create(n.state.doc,i),"pointer"),!0):!1}function pb(n,e,t,r,i){return Tc(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(i?hb(n,t):fb(n,t))}function gb(n,e,t,r){return Tc(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function mb(n,e,t,r){return Tc(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||yb(n,t,r)}function yb(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ir(n,k.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)ir(n,k.create(r,a+1,a+1+s.content.size),"pointer");else if(w.isSelectable(s))ir(n,w.create(r,a),"pointer");else continue;return!0}}function Ac(n){return jo(n)}var bg=_e?"metaKey":"ctrlKey";ue.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Ac(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&db(t,n.input.lastClick)&&!t[bg]&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o};let s=n.posAtCoords(Go(t));s&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new Cc(n,s,t,!!r)):(o=="doubleClick"?gb:mb)(n,s.pos,s.inside,t)?t.preventDefault():Pt(n,"pointer"))};var Cc=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[bg],this.allowDefault=r.shiftKey;let o,s;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),s=t.inside;else{let u=e.state.doc.resolve(t.pos);o=u.parent,s=u.depth?u.before():0}let a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof w&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ue&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Pt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Dt(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Go(e))),this.updateAllowDefault(e),this.allowDefault||!t?Pt(this.view,"pointer"):pb(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||ce&&this.mightDrag&&!this.mightDrag.node.isAtom||re&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ir(this.view,E.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Pt(this.view,"pointer")}move(e){this.updateAllowDefault(e),Pt(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};ue.touchstart=n=>{n.input.lastTouch=Date.now(),Ac(n),Pt(n,"pointer")};ue.touchmove=n=>{n.input.lastTouch=Date.now(),Pt(n,"pointer")};ue.contextmenu=n=>Ac(n);function Ig(n,e){return n.composing?!0:ce&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}var Db=yt?5e3:-1;de.compositionstart=de.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof k&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),jo(n,!0),n.markCursor=null;else if(jo(n,!e.selection.empty),Ue&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let s=o<0?i.lastChild:i.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else i=s,o=-1}}n.input.composing=!0}Mg(n,Db)};de.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,Mg(n,20))};function Mg(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>jo(n),e))}function Sg(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=wb());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function vb(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=mE(e.focusNode,e.focusOffset),r=yE(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function wb(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function jo(n,e=!1){if(!(yt&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),Sg(n),e||n.docView&&n.docView.dirty){let t=Sc(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function Cb(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}var Zr=we&&Ft<15||or&&EE<604;ue.copy=de.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let o=Zr?null:t.clipboardData,s=r.content(),{dom:a,text:l}=mg(n,s);o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):Cb(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Eb(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function bb(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Jr(n,r.value,null,i,e):Jr(n,r.textContent,r.innerHTML,i,e)},50)}function Jr(n,e,t,r,i){let o=yg(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,o||D.empty)))return!0;if(!o)return!1;let s=Eb(o),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(o);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xg(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}de.paste=(n,e)=>{let t=e;if(n.composing&&!yt)return;let r=Zr?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Jr(n,xg(r),r.getData("text/html"),i,t)?t.preventDefault():bb(n,t)};var Ho=class{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}},Ng=_e?"altKey":"ctrlKey";ue.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Go(t)),s;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof w?i.to-1:i.to))){if(r&&r.mightDrag)s=w.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(s=w.create(n.state.doc,d.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:c,slice:u}=mg(n,a);(!t.dataTransfer.files.length||!re||ng>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Zr?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Zr||t.dataTransfer.setData("text/plain",c),n.dragging=new Ho(u,!t[Ng],s)};ue.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};de.dragover=de.dragenter=(n,e)=>e.preventDefault();de.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(Go(t));if(!i)return;let o=n.state.doc.resolve(i.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=yg(n,xg(t.dataTransfer),Zr?null:t.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&!t[Ng]);if(n.someProp("handleDrop",p=>p(n,t,s||D.empty,a))){t.preventDefault();return}if(!s)return;t.preventDefault();let l=s?Ao(n.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&w.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new w(h));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,v,T)=>p=T),c.setSelection(xc(n,h,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};ue.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Dt(n)},20))};ue.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};ue.beforeinput=(n,e)=>{if(re&&yt&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,mn(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in de)ue[n]=de[n];function Kr(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}var $o=class n{constructor(e,t){this.toDOM=e,this.spec=t||wn,this.side=this.spec.side||0}map(e,t,r,i){let{pos:o,deleted:s}=e.mapResult(t.from+i,this.side<0?-1:1);return s?null:new Fe(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof n&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Kr(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},vn=class n{constructor(e,t){this.attrs=e,this.spec=t||wn}map(e,t,r,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=s?null:new Fe(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof n&&Kr(this.attrs,e.attrs)&&Kr(this.spec,e.spec)}static is(e){return e.type instanceof n}destroy(){}},Ec=class n{constructor(e,t){this.attrs=e,this.spec=t||wn}map(e,t,r,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let s=e.mapResult(t.to+i,-1);return s.deleted||s.pos<=o.pos?null:new Fe(o.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(r)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof n&&Kr(this.attrs,e.attrs)&&Kr(this.spec,e.spec)}destroy(){}},Fe=class n{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new n(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new n(e,e,new $o(t,r))}static inline(e,t,r,i){return new n(e,t,new vn(r,i))}static node(e,t,r,i){return new n(e,t,new Ec(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof vn}get widget(){return this.type instanceof $o}},rr=[],wn={},Y=class n{constructor(e,t){this.local=e.length?e:rr,this.children=t.length?t:rr}static create(e,t){return t.length?Uo(t,e,0,wn):ne}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,i+a,o)}}map(e,t,r){return this==ne||e.maps.length==0?this:this.mapInner(e,t,0,0,r||wn)}mapInner(e,t,r,i,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?Ib(this.children,s||[],e,t,r,i,o):s?new n(s.sort(Cn),rr):ne}add(e,t){return t.length?this==ne?n.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,o=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Ag(t,a,c)){for(i||(i=this.children.slice());o<i.length&&i[o]<l;)o+=3;i[o]==l?i[o+2]=i[o+2].addInner(a,u,c+1):i.splice(o,0,l,l+a.nodeSize,Uo(u,a,c+1,wn)),o+=3}});let s=Tg(o?kg(t):t,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new n(s.length?this.local.concat(s).sort(Cn):this.local,i||this.children)}remove(e){return e.length==0||this==ne?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let s,a=r[o]+t,l=r[o+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[o+2].removeInner(s,a+1);c!=ne?r[o+2]=c:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<i.length;a++)i[a].eq(s,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new n(i,r):ne}forChild(e,t){if(this==ne)return this;if(t.isLeaf)return n.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,s=o+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof vn){let c=Math.max(o,l.from)-o,u=Math.min(s,l.to)-o;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new n(i.sort(Cn),rr);return r?new zo([a,r]):a}return r||ne}eq(e){if(this==e)return!0;if(!(e instanceof n)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return kc(this.localsInner(e))}localsInner(e){if(this==ne)return rr;if(e.inlineContent||!this.local.some(vn.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof vn||t.push(this.local[r]);return t}forEachSet(e){e(this)}};Y.empty=new Y([],[]);Y.removeOverlap=kc;var ne=Y.empty,zo=class n{constructor(e){this.members=e}map(e,t){let r=this.members.map(i=>i.map(e,t,wn));return n.from(r)}forChild(e,t){if(t.isLeaf)return Y.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=ne&&(o instanceof n?r=r.concat(o.members):r.push(o))}return n.from(r)}eq(e){if(!(e instanceof n)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let s=0;s<o.length;s++)t.push(o[s])}}return t?kc(r?t:t.sort(Cn)):rr}static from(e){switch(e.length){case 0:return ne;case 1:return e[0];default:return new n(e.every(t=>t instanceof Y)?e:e.reduce((t,r)=>t.concat(r instanceof Y?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}};function Ib(n,e,t,r,i,o,s){let a=n.slice();for(let c=0,u=o;c<t.maps.length;c++){let d=0;t.maps[c].forEach((f,h,p,g)=>{let m=g-p-(h-f);for(let v=0;v<a.length;v+=3){let T=a[v+1];if(T<0||f>T+u-d)continue;let U=a[v]+u-d;h>=U?a[v+1]=f<=U?-2:-1:f>=u&&m&&(a[v]+=m,a[v+1]+=m)}d+=m}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+o),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let f=t.map(n[c+1]+o,-1),h=f-i,{index:p,offset:g}=r.content.findIndex(d),m=r.maybeChild(p);if(m&&g==d&&g+m.nodeSize==h){let v=a[c+2].mapInner(t,m,u+1,n[c]+o+1,s);v!=ne?(a[c]=d,a[c+1]=h,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Mb(a,n,e,t,i,o,s),u=Uo(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Y(e.sort(Cn),a)}function Tg(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Fe(i.from+e,i.to+e,i.type))}return t}function Mb(n,e,t,r,i,o,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?t.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+o+1);return t}function Ag(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let o=0,s;o<n.length;o++)(s=n[o])&&s.from>t&&s.to<r&&((i||(i=[])).push(s),n[o]=null);return i}function kg(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Uo(n,e,t,r){let i=[],o=!1;e.forEach((a,l)=>{let c=Ag(n,a,l+t);if(c){o=!0;let u=Uo(c,a,t+l+1,r);u!=ne&&i.push(l,l+a.nodeSize,u)}});let s=Tg(o?kg(n):n,-t).sort(Cn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Y(s,i):ne}function Cn(n,e){return n.from-e.from||n.to-e.to}function kc(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[i]=o.copy(o.from,r.to),Up(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Up(e,i,r.copy(o.from,r.to)));break}}}return e}function Up(n,e,t){for(;e<n.length&&Cn(t,n[e])>0;)e++;n.splice(e,0,t)}function oc(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=ne&&e.push(r)}),n.cursorWrapper&&e.push(Y.create(n.state.doc,[n.cursorWrapper.deco])),zo.from(e)}var Sb={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},xb=we&&Ft<=11,bc=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},Ic=class{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new bc,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);we&&Ft<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),xb&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Sb)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Fp(this.view)){if(this.suppressingSelectionUpdates)return Dt(this.view);if(we&&Ft<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&En(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=Gr(o))t.add(o);for(let o=e.anchorNode;o;o=Gr(o))if(t.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Fp(e)&&!this.ignoreSelectionChange(r),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(o=o<0?d.from:Math.min(d.from,o),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(Ue&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||Ab(e,d)!=h)&&f.remove()}}}let c=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Wo(r)&&(c=Sc(e))&&c.eq(E.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Dt(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,s),Nb(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Dt(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];t.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(we&&Ft<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let s=i&&i.parentNode==e.target?K(i)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?K(o):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},qp=new WeakMap,Wp=!1;function Nb(n){if(!qp.has(n)&&(qp.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Ue,Wp)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Wp=!0}}function Gp(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return En(s.node,s.offset,i,o)&&([t,r,i,o]=[i,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}}function Tb(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Gp(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Gp(n,t):null}function Ab(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function kb(n,e,t){let{node:r,fromOffset:i,toOffset:o,from:s,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Wo(l)||c.push({node:l.focusNode,offset:l.focusOffset})),re&&n.input.lastKeyCode===8)for(let m=o;m>i;m--){let v=r.childNodes[m-1],T=v.pmViewDesc;if(v.nodeName=="BR"&&!T){o=m;break}if(!T||T.size)break}let d=n.state.doc,f=n.someProp("domParser")||dn.fromSchema(n.state.schema),h=d.resolve(s),p=null,g=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:o,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Ob,context:h});if(c&&c[0].pos!=null){let m=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=m),p={anchor:m+s,head:v+s}}return{doc:g,sel:p,from:s,to:a}}function Ob(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(ce&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||ce&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}var _b=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Rb(n,e,t,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let M=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,bt=Sc(n,M);if(bt&&!n.state.selection.eq(bt)){if(re&&yt&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Fm=>Fm(n,mn(13,"Enter"))))return;let ui=n.state.tr.setSelection(bt);M=="pointer"?ui.setMeta("pointer",!0):M=="key"&&ui.scrollIntoView(),o&&ui.setMeta("composition",o),n.dispatch(ui)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=kb(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),f,h;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(f=n.state.selection.to,h="end"):(f=n.state.selection.from,h="start"),n.input.lastKeyCode=null;let p=Lb(d.content,c.doc.content,c.from,f,h);if(p&&n.input.domChangeCount++,(or&&n.input.lastIOSEnter>Date.now()-225||yt)&&i.some(M=>M.nodeType==1&&!_b.test(M.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",M=>M(n,mn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof k&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=Zp(n,n.state.doc,c.sel);if(M&&!M.eq(n.state.selection)){let bt=n.state.tr.setSelection(M);o&&bt.setMeta("composition",o),n.dispatch(bt)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof k&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),we&&Ft<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" \xA0"&&(p.start--,p.endA--,p.endB--);let g=c.doc.resolveNoCache(p.start-c.from),m=c.doc.resolveNoCache(p.endB-c.from),v=u.resolve(p.start),T=g.sameParent(m)&&g.parent.inlineContent&&v.end()>=p.endA,U;if((or&&n.input.lastIOSEnter>Date.now()-225&&(!T||i.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!T&&g.pos<c.doc.content.size&&!g.sameParent(m)&&(U=E.findFrom(c.doc.resolve(g.pos+1),1,!0))&&U.head==m.pos)&&n.someProp("handleKeyDown",M=>M(n,mn(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&Fb(u,p.start,p.endA,g,m)&&n.someProp("handleKeyDown",M=>M(n,mn(8,"Backspace")))){yt&&re&&n.domObserver.suppressSelectionUpdates();return}re&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),yt&&!T&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,m=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(M){return M(n,mn(13,"Enter"))})},20));let B=p.start,he=p.endA,P,qe,Et;if(T){if(g.pos==m.pos)we&&Ft<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Dt(n),20)),P=n.state.tr.delete(B,he),qe=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(Et=Pb(g.parent.content.cut(g.parentOffset,m.parentOffset),v.parent.content.cut(v.parentOffset,p.endA-v.start()))))P=n.state.tr,Et.type=="add"?P.addMark(B,he,Et.mark):P.removeMark(B,he,Et.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let M=g.parent.textBetween(g.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",bt=>bt(n,B,he,M)))return;P=n.state.tr.insertText(M,B,he)}}if(P||(P=n.state.tr.replace(B,he,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let M=Zp(n,P.doc,c.sel);M&&!(re&&n.composing&&M.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(M.head==B||M.head==P.mapping.map(he)-1)||we&&M.empty&&M.head==B)&&P.setSelection(M)}qe&&P.ensureMarks(qe),o&&P.setMeta("composition",o),n.dispatch(P.scrollIntoView())}function Zp(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xc(n,e.resolve(t.anchor),e.resolve(t.head))}function Pb(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,o=r,s,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)o=t[u].removeFromSet(o);if(i.length==1&&o.length==0)a=i[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&o.length==1)a=o[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(y.from(c).eq(n))return{mark:a,type:s}}function Fb(n,e,t,r,i){if(t-e<=i.pos-r.pos||sc(r,!0,!1)<i.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&t==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=n.resolve(sc(o,!0,!0));return!s.parent.isTextblock||s.pos>t||sc(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function sc(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Lb(n,e,t,r,i){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:s,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,o-Math.min(s,a));r-=s+l-o}if(s<o&&n.size<e.size){let l=r<=o&&r>=s?o-r:0;o-=l,o&&o<e.size&&Jp(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=r<=o&&r>=a?o-r:0;o-=l,o&&o<n.size&&Jp(n.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function Jp(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}var qo=class{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new vc,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(eg),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Qp(this),Yp(this),this.nodeViews=Xp(this),this.docView=Ap(this.state.doc,Kp(this),oc(this),this.dom,this),this.domObserver=new Ic(this,(r,i,o,s)=>Rb(this,r,i,o,s)),this.domObserver.start(),ab(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&wc(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(eg),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(Sg(this),s=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let h=Xp(this);Bb(h,this.nodeViews)&&(this.nodeViews=h,o=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&wc(this),this.editable=Qp(this),Yp(this);let l=oc(this),c=Kp(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&ME(this);if(s){this.domObserver.stop();let h=d&&(we||re)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Vb(i.selection,e.selection);if(d){let p=re?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=vb(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Ap(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&WE(this))?Dt(this,h):(hg(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&SE(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof w){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ip(this,t.getBoundingClientRect(),e)}else Ip(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new Ho(e.slice,e.move,i<0?void 0:w.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(i=t?t(a):a))return i}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(we){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&xE(this.dom),Dt(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return OE(this,e)}coordsAtPos(e,t=1){return ag(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return LE(this,t||this.state,e)}pasteHTML(e,t){return Jr(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Jr(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(lb(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],oc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,pE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return ub(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?ce&&this.root.nodeType===11&&vE(this.dom.ownerDocument)==this.dom&&Tb(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function Kp(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Fe.node(0,n.state.doc.content.size,e)]}function Yp(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Fe.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Qp(n){return!n.someProp("editable",e=>e(n.state)===!1)}function Vb(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Xp(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Bb(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function eg(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Og=n=>{throw TypeError(n)},jb=(n,e,t)=>e.has(n)||Og("Cannot "+t),_g=(n,e,t)=>e.has(n)?Og("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Oc=(n,e,t)=>(jb(n,e,"access private method"),t),Hb,$b;Hb=new WeakSet,$b=function(n){let{inline:e,mark:t}=this;return n==null?document.createElement(e?"span":"div"):n instanceof HTMLElement?n:n instanceof Function?n(t):document.createElement(n)};var Zo,_c,Jo=class{constructor({node:e,view:t,getPos:r,decorations:i,innerDecorations:o,options:s}){_g(this,Zo),this.selected=!1,this.selectNode=()=>{var a,l;this.selected=!0,(l=(a=this.options).selectNode)==null||l.call(a)},this.deselectNode=()=>{var a,l;this.selected=!1,(l=(a=this.options).deselectNode)==null||l.call(a)},this.shouldUpdate=a=>!(a.type!==this.node.type||a.sameMarkup(this.node)&&a.content.eq(this.node.content)),this.update=(a,l,c)=>{var u,d;let f=this.options.update,h;return f&&(h=f(a,l,c)),typeof h!="boolean"&&(h=this.shouldUpdate(a)),this.node=a,this.decorations=l,this.innerDecorations=c,h&&((d=(u=this.options).onUpdate)==null||d.call(u)),h},this.shouldIgnoreMutation=a=>!this.dom||!this.contentDOM||this.node.isLeaf||this.node.isAtom?!0:a.type==="selection"?!1:this.contentDOM===a.target&&a.type==="attributes"?!0:!this.contentDOM.contains(a.target),this.ignoreMutation=a=>{if(!this.dom||!this.contentDOM)return!0;let l,c=this.options.ignoreMutation;return c&&(l=c(a)),typeof l!="boolean"&&(l=this.shouldIgnoreMutation(a)),l},this.destroy=()=>{var a,l,c;(l=(a=this.options).destroy)==null||l.call(a),this.dom.remove(),(c=this.contentDOM)==null||c.remove()},this.setAttrs=a=>{let{dispatch:l,state:c}=this.view,u=this.getPos();if(typeof u=="number")return l(c.tr.setNodeMarkup(u,void 0,j(j({},this.node.attrs),a)))},this.node=e,this.view=t,this.getPos=r,this.decorations=i,this.innerDecorations=o,this.options=s,this.dom=this.createDOM(s.as),this.contentDOM=e.isLeaf?null:this.createContentDOM(s.contentAs),this.dom.setAttribute("data-node-view-root","true"),this.contentDOM&&(this.contentDOM.setAttribute("data-node-view-content","true"),this.contentDOM.style.whiteSpace="inherit"),this.setSelection=s.setSelection,this.stopEvent=s.stopEvent}createDOM(e){return Oc(this,Zo,_c).call(this,e)}createContentDOM(e){return Oc(this,Zo,_c).call(this,e)}get component(){return this.options.component}};Zo=new WeakSet,_c=function(n){let{node:e}=this;return n==null?document.createElement(e.isInline?"span":"div"):n instanceof HTMLElement?n:n instanceof Function?n(e):document.createElement(n)};var Ko=class{constructor(e){this.view=e.view,this.options=e.options}get component(){return this.options.component}get root(){var e,t;let r=(t=(e=this.options).root)==null?void 0:t.call(e,this.view.dom);return r||(r=this.view.dom.parentElement??document.body),r}update(e,t){var r,i;this.view=e,this.prevState=t,(i=(r=this.options).update)==null||i.call(r,e,t)}destroy(){var e,t;(t=(e=this.options).destroy)==null||t.call(e)}},Rc,Rg,Yo=class{constructor({pos:e,spec:t,options:r}){_g(this,Rc),this.pos=e,this.options=r,this.spec=t,this.dom=Oc(this,Rc,Rg).call(this,r.as),this.dom.setAttribute("data-widget-view-root","true")}bind(e,t){this.view=e,this.getPos=t}get component(){return this.options.component}};Rc=new WeakSet,Rg=function(n){return n instanceof HTMLElement?n:document.createElement(n)};var Pc=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var Qo=(()=>{class n{constructor(t,r){this._injector=t,this._vcf=r,this.nodeView={},this.nodeViewContext={},this.createComponent=(i,o=null)=>{let s=this._vcf.createComponent(i.component,{injector:this._injector}),a=i.key||o||Pc();return Object.keys(i.inputs||{}).forEach(l=>{s.setInput(l,i.inputs[l])}),s.setInput("provider",this.provider),s.setInput("key",a),{componentRef:s,key:a}},this.createNodeView=i=>(o,s,a,l,c)=>{let{componentRef:u,key:d}=this.createComponent(i);return this.nodeView[d]=new Jo({node:o,view:s,getPos:a,decorations:l,innerDecorations:c,options:X(j({},i),{component:u,onUpdate:()=>{i.onUpdate?.(),this.updateNodeViewContext(d),this.nodeViewContext[d].contentRef(u.instance.container)},selectNode:()=>{i.selectNode?.(),this.updateNodeViewContext(d)},deselectNode:()=>{i.deselectNode?.(),this.updateNodeViewContext(d)},destroy:()=>{u.destroy(),i.destroy?.(),delete this.nodeView[d],delete this.nodeViewContext[d]}})}),this.updateNodeViewContext(d),u.instance.parentView.appendChild(u.instance.el.nativeElement),this.nodeViewContext[d].contentRef(u.instance.container),this.nodeView[d]},this.pluginView={},this.pluginViewContext={},this.createPluginView=i=>o=>{let{componentRef:s,key:a}=this.createComponent(i);return this.pluginView[a]=s.instance.pluginView||new Ko({view:o,options:X(j({},i),{component:s.instance,update:(l,c)=>{i.update?.(l,c),this.updatePluginViewContext(a)},destroy:()=>{s.destroy(),i.destroy?.(),this.pluginView[a].destroy(),delete this.pluginViewContext[a],delete this.pluginView[a]}})}),this.pluginView[a].update(o,o.state),this.updatePluginViewContext(a,o,o.state),s.instance.parentView.appendChild(s.instance.container),this.pluginView[a]},this.widgetView={},this.widgetViewContext={},this.createWidgetView=i=>(o,s={})=>{let a=i.key||Pc(),l=X(j({key:a},s),{destroy:c=>{this.widgetView[a]?.component?._ref?.destroy(),s.destroy?.(c),delete this.widgetViewContext[a],delete this.widgetView[a]}});return Fe.widget(o,(c,u)=>{let{componentRef:d}=this.createComponent(i,a);return d.instance._ref=d,this.widgetView[a]=new Yo({pos:o,spec:l,options:X(j({},i),{component:d.instance})}),this.widgetView[a].bind(c,u),this.updateWidgetViewContext(a,c,u,l),d.instance.parentView.appendChild(d.instance.container),this.widgetView[a].dom},l)}}updateNodeViewContext(t){let r=this.nodeView[t];r.view&&(this.nodeViewContext[t]=Object.assign(this.nodeViewContext[t]||{},{setAttrs:r.setAttrs,view:r.view,getPos:r.getPos,node:r.node,selected:r.selected,decorations:r.decorations,innerDecorations:r.innerDecorations,contentRef:i=>{i&&i instanceof HTMLElement&&r.contentDOM&&i.firstChild!==r.contentDOM&&i.appendChild(r.contentDOM)}}))}updatePluginViewContext(t,r,i){this.pluginViewContext[t]=Object.assign(this.pluginViewContext[t]||{},{view:this.pluginView[t].view||r,prevState:this.pluginView[t].prevState||i})}updateWidgetViewContext(t,r,i,o){this.widgetViewContext[t]=Object.assign(this.widgetViewContext[t]||{},{view:this.widgetView[t].view||r,getPos:this.widgetView[t].getPos||i,spec:this.widgetView[t].spec||o})}static{this.\u0275fac=function(r){return new(r||n)(A(Kt),A(At))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();var Xr=(()=>{class n{constructor(t){this.el=t}get createNodeView(){return this.provider.createNodeView}get createPluginView(){return this.provider.createPluginView}get createWidgetView(){return this.provider.createWidgetView}static{this.\u0275fac=function(r){return new(r||n)($(De))}}static{this.\u0275dir=He({type:n,selectors:[["ng-prosemirror-editor"]],standalone:!0})}}return n})();var Ub=["*"],Pg=(()=>{class n{set editor(t){this._editorComp=t,t&&(this._editorComp.provider=this,this.service.editor=this._editorComp)}get editor(){return this._editorComp}constructor(t){this.service=t,this.createNodeView=this.service.createNodeView,this.createPluginView=this.service.createPluginView,this.createWidgetView=this.service.createWidgetView,this.service.provider=this}static{this.\u0275fac=function(r){return new(r||n)($(Qo))}}static{this.\u0275cmp=me({type:n,selectors:[["ng-prosemirror-adapter-provider"]],contentQueries:function(r,i,o){if(r&1&&hh(o,Xr,5),r&2){let s;Jn(s=Kn())&&(i.editor=s.first)}},standalone:!0,features:[fo([Qo]),ve],ngContentSelectors:Ub,decls:1,vars:0,template:function(r,i){r&1&&(ao(),lo(0))},dependencies:[xr],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}}return n})();var qb=["p",0],Wb=["blockquote",0],Gb=["hr"],Zb=["pre",["code",0]],Jb=["br"],Kb={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return qb}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return Wb}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return Gb}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return Zb}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){let{src:e,alt:t,title:r}=n.attrs;return["img",{src:e,alt:t,title:r}]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return Jb}}},Yb=["em",0],Qb=["strong",0],Xb=["code",0],eI={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){let{href:e,title:t}=n.attrs;return["a",{href:e,title:t},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return Yb}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return Qb}},code:{parseDOM:[{tag:"code"}],toDOM(){return Xb}}},Xo=new Io({nodes:Kb,marks:eI});var vt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ts={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tI=typeof navigator<"u"&&/Mac/.test(navigator.platform),nI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(H=0;H<10;H++)vt[48+H]=vt[96+H]=String(H);var H;for(H=1;H<=24;H++)vt[H+111]="F"+H;var H;for(H=65;H<=90;H++)vt[H]=String.fromCharCode(H+32),ts[H]=String.fromCharCode(H);var H;for(es in vt)ts.hasOwnProperty(es)||(ts[es]=vt[es]);var es;function Fg(n){var e=tI&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||nI&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?ts:vt)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}var rI=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function iI(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))rI?s=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),s&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function oI(n){let e=Object.create(null);for(let t in n)e[iI(t)]=n[t];return e}function Fc(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function ei(n){return new z({props:{handleKeyDown:Lc(n)}})}function Lc(n){let e=oI(n);return function(t,r){let i=Fg(r),o,s=e[Fc(i,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Fc(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=vt[r.keyCode])&&o!=i){let a=e[Fc(o,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}var ns=200,Q=function(){};Q.prototype.append=function(e){return e.length?(e=Q.from(e),!this.length&&e||e.length<ns&&this.leafAppend(e)||this.length<ns&&e.leafPrepend(this)||this.appendInner(e)):this};Q.prototype.prepend=function(e){return e.length?Q.from(e).append(this):this};Q.prototype.appendInner=function(e){return new sI(this,e)};Q.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Q.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Q.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Q.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Q.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,s){return i.push(e(o,s))},t,r),i};Q.from=function(e){return e instanceof Q?e:e&&e.length?new Lg(e):Q.empty};var Lg=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,s,a){for(var l=o;l<s;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,s,a){for(var l=o-1;l>=s;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=ns)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=ns)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Q);Q.empty=new Lg([]);var sI=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,s){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,s){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(i,a),o,s)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Q),Vc=Q;var aI=500,In=class n{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;t&&(i=this.remapping(r,this.items.length),o=i.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),o=i.maps.length),o--,u.push(d);return}if(i){u.push(new rt(d.map));let h=d.step.map(i.slice(o)),p;h&&s.maybeStep(h).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new rt(p,void 0,void 0,c.length+u.length))),o--,p&&i.appendMap(p,o)}else s.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(o)):d.selection,l=new n(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,r,i){let o=[],s=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new rt(e.mapping.maps[u],d,t),h;(h=l&&l.merge(f))&&(f=h,u?o.pop():a=a.slice(0,a.length-1)),o.push(f),t&&(s++,t=void 0),i||(l=f)}let c=s-r.depth;return c>cI&&(a=lI(a,c),s-=c),new n(a.append(o),s)}remapping(e,t){let r=new Vr;return this.items.forEach((i,o)=>{let s=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new n(this.items.append(e.map(t=>new rt(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},i);let l=t;this.items.forEach(f=>{let h=o.getMirror(--l);if(h==null)return;s=Math.min(s,h);let p=o.maps[h];if(f.step){let g=e.steps[h].invert(e.docs[h]),m=f.selection&&f.selection.map(o.slice(l+1,h));m&&a++,r.push(new rt(p,g,m))}else r.push(new rt(p))},i);let c=[];for(let f=t;f<s;f++)c.push(new rt(o.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new n(u,a);return d.emptyItemCount()>aI&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)i.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=s.selection&&s.selection.map(t.slice(r));u&&o++;let d=new rt(c.invert(),l,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else s.map&&r--},this.items.length,0),new n(Vc.from(i.reverse()),o)}};In.empty=new In(Vc.empty,0);function lI(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}var rt=class n{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new n(t.getMap().invert(),t,this.selection)}}},it=class{constructor(e,t,r,i,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}},cI=20;function uI(n,e,t,r){let i=t.getMeta(Bt),o;if(i)return i.historyState;t.getMeta(fI)&&(n=new it(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(Bt))return s.getMeta(Bt).redo?new it(n.done.addTransform(t,void 0,r,rs(e)),n.undone,Vg(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new it(n.done,n.undone.addTransform(t,void 0,r,rs(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!dI(t,n.prevRanges)),c=s?Bc(n.prevRanges,t.mapping):Vg(t.mapping.maps[t.steps.length-1]);return new it(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,rs(e)),In.empty,c,t.time,a??n.prevComposition)}else return(o=t.getMeta("rebased"))?new it(n.done.rebased(t,o),n.undone.rebased(t,o),Bc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new it(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Bc(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function dI(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(t=!0)}),t}function Vg(n){let e=[];return n.forEach((t,r,i,o)=>e.push(i,o)),e}function Bc(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function jg(n,e,t,r){let i=rs(e),o=Bt.get(e).spec.config,s=(r?n.undone:n.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new it(r?l:s.remaining,r?s.remaining:l,null,0,-1);t(s.transform.setSelection(a).setMeta(Bt,{redo:r,historyState:c}).scrollIntoView())}var jc=!1,Bg=null;function rs(n){let e=n.plugins;if(Bg!=e){jc=!1,Bg=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){jc=!0;break}}return jc}var Bt=new zr("history"),fI=new zr("closeHistory");function Hg(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new z({key:Bt,state:{init(){return new it(In.empty,In.empty,null,0,-1)},apply(e,t,r){return uI(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?ar:r=="historyRedo"?Mn:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}var ar=(n,e)=>{let t=Bt.getState(n);return!t||t.done.eventCount==0?!1:(e&&jg(t,n,e,!1),!0)},Mn=(n,e)=>{let t=Bt.getState(n);return!t||t.undone.eventCount==0?!1:(e&&jg(t,n,e,!0),!0)};var zg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function hI(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}var pI=(n,e,t)=>{let r=hI(n,t);if(!r)return!1;let i=Ug(r);if(!i){let s=r.blockRange(),a=s&&pn(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)}let o=i.nodeBefore;if(!o.type.spec.isolating&&Gg(n,i,e))return!0;if(r.parent.content.size==0&&(lr(o,"end")||w.isSelectable(o))){let s=ko(n.doc,r.before(),r.after(),D.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(lr(o,"end")?E.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):w.create(a.doc,i.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1};function lr(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}var gI=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Ug(r)}let s=o&&o.nodeBefore;return!s||!w.isSelectable(s)?!1:(e&&e(n.tr.setSelection(w.create(n.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Ug(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function mI(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}var yI=(n,e,t)=>{let r=mI(n,t);if(!r)return!1;let i=qg(r);if(!i)return!1;let o=i.nodeAfter;if(Gg(n,i,e))return!0;if(r.parent.content.size==0&&(lr(o,"start")||w.isSelectable(o))){let s=ko(n.doc,r.before(),r.after(),D.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(lr(o,"start")?E.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):w.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},DI=(n,e,t)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=qg(r)}let s=o&&o.nodeAfter;return!s||!w.isSelectable(s)?!1:(e&&e(n.tr.setSelection(w.create(n.doc,o.pos)).scrollIntoView()),!0)};function qg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}var ti=(n,e)=>{let t=n.selection,r=t instanceof w,i;if(r){if(t.node.isTextblock||!pt(n.doc,t.from))return!1;i=t.from}else if(i=Kl(n.doc,t.from,-1),i==null)return!1;if(e){let o=n.tr.join(i);r&&o.setSelection(w.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Wg=(n,e)=>{let t=n.selection,r;if(t instanceof w){if(t.node.isTextblock||!pt(n.doc,t.to))return!1;r=t.to}else if(r=Kl(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},ni=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),o=i&&pn(i);return o==null?!1:(e&&e(n.tr.lift(i,o).scrollIntoView()),!0)},vI=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function $c(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}var zc=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),o=t.indexAfter(-1),s=$c(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(E.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},wI=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof Se||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=$c(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(s,o.createAndFill());a.setSelection(k.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},CI=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(Ot(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),i=r&&pn(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function EI(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof w&&e.selection.node.isBlock)return!r.parentOffset||!Ot(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let o=i.parentOffset==i.parent.content.size,s=e.tr;(e.selection instanceof k||e.selection instanceof Se)&&s.deleteSelection();let a=r.depth==0?null:$c(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=n&&n(i.parent,o),c=l?[l]:o&&a?[{type:a}]:void 0,u=Ot(s.doc,s.mapping.map(r.pos),1,c);if(!c&&!u&&Ot(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!o&&!r.parentOffset&&r.parent.type!=a)){let d=s.mapping.map(r.before()),f=s.doc.resolve(d);a&&r.node(-1).canReplaceWith(f.index(),f.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}t(s.scrollIntoView())}return!0}}var bI=EI();var ri=(n,e)=>{let{$from:t,to:r}=n.selection,i,o=t.sharedDepth(r);return o==0?!1:(i=t.before(o),e&&e(n.tr.setSelection(w.create(n.doc,i))),!0)},II=(n,e)=>(e&&e(n.tr.setSelection(new Se(n.doc))),!0);function MI(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||pt(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function Gg(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,o,s;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(MI(n,e,t))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(s=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&s.matchType(o[0]||i.type).validEnd){if(t){let d=e.pos+i.nodeSize,f=y.empty;for(let g=o.length-1;g>=0;g--)f=y.from(o[g].create(null,f));f=y.from(r.copy(f));let h=n.tr.step(new G(e.pos-1,d,e.pos,d,new D(f,1,0),o.length,!0)),p=d+2*o.length;pt(h.doc,p)&&h.join(p),t(h.scrollIntoView())}return!0}let l=E.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&pn(c);if(u!=null&&u>=e.depth)return t&&t(n.tr.lift(c,u).scrollIntoView()),!0;if(a&&lr(i,"start",!0)&&lr(r,"end")){let d=r,f=[];for(;f.push(d),!d.isTextblock;)d=d.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(d.canReplace(d.childCount,d.childCount,h.content)){if(t){let g=y.empty;for(let v=f.length-1;v>=0;v--)g=y.from(f[v].copy(g));let m=n.tr.step(new G(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new D(g,f.length,0),0,!0));t(m.scrollIntoView())}return!0}}return!1}function Zg(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(t&&t(e.tr.setSelection(k.create(e.doc,n<0?i.start(o):i.end(o)))),!0):!1}}var SI=Zg(-1),xI=Zg(1);function ii(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),a=s&&Xn(s,n,e);return a?(r&&r(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function cr(n,e=null){return function(t,r){let i=!1;for(let o=0;o<t.selection.ranges.length&&!i;o++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[o];t.doc.nodesBetween(s,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let u=t.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,n)}})}if(!i)return!1;if(r){let o=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];o.setBlockType(a,l,n,e)}r(o.scrollIntoView())}return!0}}function NI(n,e,t){for(let r=0;r<e.length;r++){let{$from:i,$to:o}=e[r],s=i.depth==0?n.inlineContent&&n.type.allowsMarkType(t):!1;if(n.nodesBetween(i.pos,o.pos,a=>{if(s)return!1;s=a.inlineContent&&a.type.allowsMarkType(t)}),s)return!0}return!1}function Ct(n,e=null){return function(t,r){let{empty:i,$cursor:o,ranges:s}=t.selection;if(i&&!o||!NI(t.doc,s,n))return!1;if(r)if(o)n.isInSet(t.storedMarks||o.marks())?r(t.tr.removeStoredMark(n)):r(t.tr.addStoredMark(n.create(e)));else{let a=!1,l=t.tr;for(let c=0;!a&&c<s.length;c++){let{$from:u,$to:d}=s[c];a=t.doc.rangeHasMark(u.pos,d.pos,n)}for(let c=0;c<s.length;c++){let{$from:u,$to:d}=s[c];if(a)l.removeMark(u.pos,d.pos,n);else{let f=u.pos,h=d.pos,p=u.nodeAfter,g=d.nodeBefore,m=p&&p.isText?/^\s*/.exec(p.text)[0].length:0,v=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;f+m<h&&(f+=m,h-=v),l.addMark(f,h,n.create(e))}}r(l.scrollIntoView())}return!0}}function oi(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}var Hc=oi(zg,pI,gI),$g=oi(zg,yI,DI),wt={Enter:oi(vI,wI,CI,bI),"Mod-Enter":zc,Backspace:Hc,"Mod-Backspace":Hc,"Shift-Backspace":Hc,Delete:$g,"Mod-Delete":$g,"Mod-a":II},Jg={"Ctrl-h":wt.Backspace,"Alt-Backspace":wt["Mod-Backspace"],"Ctrl-d":wt.Delete,"Ctrl-Alt-Backspace":wt["Mod-Delete"],"Alt-Delete":wt["Mod-Delete"],"Alt-d":wt["Mod-Delete"],"Ctrl-a":SI,"Ctrl-e":xI};for(let n in wt)Jg[n]=wt[n];var TI=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Kg=TI?Jg:wt;function Yg(n={}){return new z({view(e){return new Uc(e,n)}})}var Uc=class{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=s=>{this[i](s)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let o,s;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,s=-pageYOffset;else{let a=i.getBoundingClientRect();o=a.left-i.scrollLeft,s=a.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-s+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!o){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=Ao(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}};var ie=class n extends E{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return n.valid(r)?new n(r):E.near(r)}content(){return D.empty}eq(e){return e instanceof n&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new n(e.resolve(t.pos))}getBookmark(){return new qc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!AI(e)||!kI(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&n.valid(e))return e;let i=e.pos,o=null;for(let s=e.depth;;s--){let a=e.node(s);if(t>0?e.indexAfter(s)<a.childCount:e.index(s)>0){o=a.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;i+=t;let l=e.doc.resolve(i);if(n.valid(l))return l}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!w.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue e}break}o=s,i+=t;let a=e.doc.resolve(i);if(n.valid(a))return a}return null}}};ie.prototype.visible=!1;ie.findFrom=ie.findGapCursorFrom;E.jsonID("gapcursor",ie);var qc=class n{constructor(e){this.pos=e}map(e){return new n(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return ie.valid(t)?new ie(t):E.near(t)}};function AI(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function kI(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Qg(){return new z({props:{decorations:PI,createSelectionBetween(n,e,t){return e.pos==t.pos&&ie.valid(t)?new ie(t):null},handleClick:_I,handleKeyDown:OI,handleDOMEvents:{beforeinput:RI}}})}var OI=Lc({ArrowLeft:is("horiz",-1),ArrowRight:is("horiz",1),ArrowUp:is("vert",-1),ArrowDown:is("vert",1)});function is(n,e){let t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof k){if(!o.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=ie.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new ie(c))),!0):!1}}function _I(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!ie.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&w.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new ie(r))),!0)}function RI(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof ie))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=y.empty;for(let s=r.length-1;s>=0;s--)i=y.from(r[s].createAndFill(null,i));let o=n.state.tr.replace(t.pos,t.pos,new D(i,0,0));return o.setSelection(k.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function PI(n){if(!(n.selection instanceof ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Y.create(n.doc,[Fe.widget(n.selection.head,e,{key:"gapcursor"})])}function fe(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)Xg(n,arguments[e]);return n}function Xg(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Xg(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}var si="http://www.w3.org/2000/svg",FI="http://www.w3.org/1999/xlink",Wc="ProseMirror-icon";function LI(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t)|0;return e}function VI(n,e){let t=(n.nodeType==9?n:n.ownerDocument)||document,r=t.createElement("div");if(r.className=Wc,e.path){let{path:i,width:o,height:s}=e,a="pm-icon-"+LI(i).toString(16);t.getElementById(a)||BI(n,a,e);let l=r.appendChild(t.createElementNS(si,"svg"));l.style.width=o/s+"em",l.appendChild(t.createElementNS(si,"use")).setAttributeNS(FI,"href",/([^#]*)/.exec(t.location.toString())[1]+"#"+a)}else if(e.dom)r.appendChild(e.dom.cloneNode(!0));else{let{text:i,css:o}=e;r.appendChild(t.createElement("span")).textContent=i||"",o&&(r.firstChild.style.cssText=o)}return r}function BI(n,e,t){let[r,i]=n.nodeType==9?[n,n.body]:[n.ownerDocument||document,n],o=r.getElementById(Wc+"-collection");o||(o=r.createElementNS(si,"svg"),o.id=Wc+"-collection",o.style.display="none",i.insertBefore(o,i.firstChild));let s=r.createElementNS(si,"symbol");s.id=e,s.setAttribute("viewBox","0 0 "+t.width+" "+t.height),s.appendChild(r.createElementNS(si,"path")).setAttribute("d",t.path),o.appendChild(s)}var Ce="ProseMirror-menu",Ee=class{constructor(e){this.spec=e}render(e){let t=this.spec,r=t.render?t.render(e):t.icon?VI(e.root,t.icon):t.label?fe("div",null,li(e,t.label)):null;if(!r)throw new RangeError("MenuItem without icon or label property");if(t.title){let o=typeof t.title=="function"?t.title(e.state):t.title;r.setAttribute("title",li(e,o))}t.class&&r.classList.add(t.class),t.css&&(r.style.cssText+=t.css),r.addEventListener("mousedown",o=>{o.preventDefault(),r.classList.contains(Ce+"-disabled")||t.run(e.state,e.dispatch,e,o)});function i(o){if(t.select){let a=t.select(o);if(r.style.display=a?"":"none",!a)return!1}let s=!0;if(t.enable&&(s=t.enable(o)||!1,Gc(r,Ce+"-disabled",!s)),t.active){let a=s&&t.active(o)||!1;Gc(r,Ce+"-active",a)}return!0}return{dom:r,update:i}}};function li(n,e){return n._props.translate?n._props.translate(e):e}var ai={time:0,node:null};function em(n){ai.time=Date.now(),ai.node=n.target}function tm(n){return Date.now()-100<ai.time&&ai.node&&n.contains(ai.node)}var ci=class{constructor(e,t={}){this.options=t,this.options=t||{},this.content=Array.isArray(e)?e:[e]}render(e){let t=nm(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=fe("div",{class:Ce+"-dropdown "+(this.options.class||""),style:this.options.css},li(e,this.options.label||""));this.options.title&&i.setAttribute("title",li(e,this.options.title));let o=fe("div",{class:Ce+"-dropdown-wrap"},i),s=null,a=null,l=()=>{s&&s.close()&&(s=null,r.removeEventListener("mousedown",a))};i.addEventListener("mousedown",u=>{u.preventDefault(),em(u),s?l():(s=this.expand(o,t.dom),r.addEventListener("mousedown",a=()=>{tm(o)||l()}))});function c(u){let d=t.update(u);return o.style.display=d?"":"none",d}return{dom:o,update:c}}expand(e,t){let r=fe("div",{class:Ce+"-dropdown-menu "+(this.options.class||"")},t),i=!1;function o(){return i?!1:(i=!0,e.removeChild(r),!0)}return e.appendChild(r),{close:o,node:r}}};function nm(n,e){let t=[],r=[];for(let i=0;i<n.length;i++){let{dom:o,update:s}=n[i].render(e);t.push(fe("div",{class:Ce+"-dropdown-item"},o)),r.push(s)}return{dom:t,update:rm(r,t)}}function rm(n,e){return t=>{let r=!1;for(let i=0;i<n.length;i++){let o=n[i](t);e[i].style.display=o?"":"none",o&&(r=!0)}return r}}var as=class{constructor(e,t={}){this.options=t,this.content=Array.isArray(e)?e:[e]}render(e){let t=nm(this.content,e),r=e.dom.ownerDocument.defaultView||window,i=fe("div",{class:Ce+"-submenu-label"},li(e,this.options.label||"")),o=fe("div",{class:Ce+"-submenu-wrap"},i,fe("div",{class:Ce+"-submenu"},t.dom)),s=null;i.addEventListener("mousedown",l=>{l.preventDefault(),em(l),Gc(o,Ce+"-submenu-wrap-active",!1),s||r.addEventListener("mousedown",s=()=>{tm(o)||(o.classList.remove(Ce+"-submenu-wrap-active"),r.removeEventListener("mousedown",s),s=null)})});function a(l){let c=t.update(l);return o.style.display=c?"":"none",c}return{dom:o,update:a}}};function jI(n,e){let t=document.createDocumentFragment(),r=[],i=[];for(let s=0;s<e.length;s++){let a=e[s],l=[],c=[];for(let u=0;u<a.length;u++){let{dom:d,update:f}=a[u].render(n),h=fe("span",{class:Ce+"item"},d);t.appendChild(h),c.push(h),l.push(f)}l.length&&(r.push(rm(l,c)),s<e.length-1&&i.push(t.appendChild(HI())))}function o(s){let a=!1,l=!1;for(let c=0;c<r.length;c++){let u=r[c](s);c&&(i[c-1].style.display=l&&u?"":"none"),l=u,u&&(a=!0)}return a}return{dom:t,update:o}}function HI(){return fe("span",{class:Ce+"separator"})}var xe={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"\u2B1A",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},im=new Ee({title:"Join with above block",run:ti,select:n=>ti(n),icon:xe.join}),om=new Ee({title:"Lift out of enclosing block",run:ni,select:n=>ni(n),icon:xe.lift}),sm=new Ee({title:"Select parent node",run:ri,select:n=>ri(n),icon:xe.selectParentNode}),am=new Ee({title:"Undo last change",run:ar,enable:n=>ar(n),icon:xe.undo}),lm=new Ee({title:"Redo last undone change",run:Mn,enable:n=>Mn(n),icon:xe.redo});function cm(n,e){let t={run(r,i){return ii(n,e.attrs)(r,i)},select(r){return ii(n,e.attrs)(r)}};for(let r in e)t[r]=e[r];return new Ee(t)}function ls(n,e){let t=cr(n,e.attrs),r={run:t,enable(i){return t(i)},active(i){let{$from:o,to:s,node:a}=i.selection;return a?a.hasMarkup(n,e.attrs):s<=o.end()&&o.parent.hasMarkup(n,e.attrs)}};for(let i in e)r[i]=e[i];return new Ee(r)}function Gc(n,e,t){t?n.classList.add(e):n.classList.remove(e)}var ss="ProseMirror-menubar";function $I(){if(typeof navigator>"u")return!1;let n=navigator.userAgent;return!/Edge\/\d/.test(n)&&/AppleWebKit/.test(n)&&/Mobile\/\w+/.test(n)}function um(n){return new z({view(e){return new Zc(e,n)}})}var Zc=class{constructor(e,t){this.editorView=e,this.options=t,this.spacer=null,this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.scrollHandler=null,this.wrapper=fe("div",{class:ss+"-wrapper"}),this.menu=this.wrapper.appendChild(fe("div",{class:ss})),this.menu.className=ss,e.dom.parentNode&&e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom);let{dom:r,update:i}=jI(this.editorView,this.options.content);if(this.contentUpdate=i,this.menu.appendChild(r),this.update(),t.floating&&!$I()){this.updateFloat();let o=qI(this.wrapper);this.scrollHandler=s=>{let a=this.editorView.root;(a.body||a).contains(this.wrapper)?this.updateFloat(s.target.getBoundingClientRect?s.target:void 0):o.forEach(l=>l.removeEventListener("scroll",this.scrollHandler))},o.forEach(s=>s.addEventListener("scroll",this.scrollHandler))}}update(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))}updateScrollCursor(){let e=this.editorView.root.getSelection();if(!e.focusNode)return;let t=e.getRangeAt(0).getClientRects(),r=t[zI(e)?0:t.length-1];if(!r)return;let i=this.menu.getBoundingClientRect();if(r.top<i.bottom&&r.bottom>i.top){let o=UI(this.wrapper);o&&(o.scrollTop-=i.bottom-r.top)}}updateFloat(e){let t=this.wrapper,r=t.getBoundingClientRect(),i=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(r.top>=i||r.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{let o=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=r.left+o+"px",this.menu.style.display=r.top>(this.editorView.dom.ownerDocument.defaultView||window).innerHeight?"none":"",e&&(this.menu.style.top=i+"px")}else if(r.top<i&&r.bottom>=this.menu.offsetHeight+10){this.floating=!0;let o=this.menu.getBoundingClientRect();this.menu.style.left=o.left+"px",this.menu.style.width=o.width+"px",e&&(this.menu.style.top=i+"px"),this.menu.style.position="fixed",this.spacer=fe("div",{class:ss+"-spacer",style:`height: ${o.height}px`}),t.insertBefore(this.spacer,this.menu)}}destroy(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)}};function zI(n){return n.anchorNode==n.focusNode?n.anchorOffset>n.focusOffset:n.anchorNode.compareDocumentPosition(n.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function UI(n){for(let e=n.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}function qI(n){let e=[n.ownerDocument.defaultView||window];for(let t=n.parentNode;t;t=t.parentNode)e.push(t);return e}function cs(n,e=null){return function(t,r){let{$from:i,$to:o}=t.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(n)&&s.startIndex==0){if(i.index(s.depth-1)==0)return!1;let u=t.doc.resolve(s.start-2);l=new cn(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new cn(i,t.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=Xn(l,n,e,s);return c?(r&&r(WI(t.tr,s,c,a,n).scrollIntoView()),!0):!1}}function WI(n,e,t,r,i){let o=y.empty;for(let u=t.length-1;u>=0;u--)o=y.from(t[u].type.create(t[u].attrs,o));n.step(new G(e.start-(r?2:0),e.end,e.start,e.end,new D(o,0,0),t.length,!0));let s=0;for(let u=0;u<t.length;u++)t[u].type==i&&(s=u+1);let a=t.length-s,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Ot(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function dm(n,e){return function(t,r){let{$from:i,$to:o,node:s}=t.selection;if(s&&s.isBlock||i.depth<2||!i.sameParent(o))return!1;let a=i.node(-1);if(a.type!=n)return!1;if(i.parent.content.size==0&&i.node(-1).childCount==i.indexAfter(-1)){if(i.depth==3||i.node(-3).type!=n||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){let d=y.empty,f=i.index(-1)?1:i.index(-2)?2:3;for(let v=i.depth-f;v>=i.depth-3;v--)d=y.from(i.node(v).copy(d));let h=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;d=d.append(y.from(n.createAndFill()));let p=i.before(i.depth-(f-1)),g=t.tr.replace(p,i.after(-h),new D(d,4-f,0)),m=-1;g.doc.nodesBetween(p,g.doc.content.size,(v,T)=>{if(m>-1)return!1;v.isTextblock&&v.content.size==0&&(m=T+1)}),m>-1&&g.setSelection(E.near(g.doc.resolve(m))),r(g.scrollIntoView())}return!0}let l=o.pos==i.end()?a.contentMatchAt(0).defaultType:null,c=t.tr.delete(i.pos,o.pos),u=l?[e?{type:n,attrs:e}:null,{type:l}]:void 0;return Ot(c.doc,i.pos,2,u)?(r&&r(c.split(i.pos,2,u).scrollIntoView()),!0):!1}}function fm(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,s=>s.childCount>0&&s.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?GI(e,t,n,o):ZI(e,t,o):!0:!1}}function GI(n,e,t,r){let i=n.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new G(o-1,s,o,s,new D(y.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new cn(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));let a=pn(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;return pt(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function ZI(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,g=t.startIndex;p>g;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let o=r.doc.resolve(t.start),s=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?y.empty:y.from(i))))return!1;let d=o.pos,f=d+s.nodeSize;return r.step(new G(d-(a?1:0),f+(l?1:0),d+1,f-1,new D((a?y.empty:y.from(i.copy(y.empty))).append(l?y.empty:y.from(i.copy(y.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function hm(n){return function(e,t){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=y.from(c?n.create():null),d=new D(y.from(n.create(null,y.from(a.type.create(null,u)))),c?3:1,0),f=o.start,h=o.end;t(e.tr.step(new G(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}var ot=class{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?JI(t):t,this.undoable=r.undoable!==!1}};function JI(n){return function(e,t,r,i){let o=n;if(t[1]){let s=t[0].lastIndexOf(t[1]);o+=t[0].slice(s+t[1].length),r+=s;let a=r-i;a>0&&(o=t[0].slice(s-a,s)+o,r=i)}return e.tr.insertText(o,r,i)}}var KI=500;function gm({rules:n}){let e=new z({state:{init(){return null},apply(t,r){let i=t.getMeta(this);return i||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,i,o){return pm(t,r,i,o,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&pm(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function pm(n,e,t,r,i,o){if(n.composing)return!1;let s=n.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-KI),a.parentOffset,null,"\uFFFC")+r;for(let c=0;c<i.length;c++){let u=i[c],d=u.match.exec(l),f=d&&u.handler(s,d,e-(d[0].length-r.length),t);if(f)return u.undoable&&f.setMeta(o,{transform:f,from:e,to:t,text:r}),n.dispatch(f),!0}return!1}var mm=(n,e)=>{let t=n.plugins;for(let r=0;r<t.length;r++){let i=t[r],o;if(i.spec.isInputRules&&(o=i.getState(n))){if(e){let s=n.tr,a=o.transform;for(let l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(o.text){let l=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,n.schema.text(o.text,l))}else s.delete(o.from,o.to);e(s)}return!0}}return!1},ym=new ot(/--$/,"\u2014"),Dm=new ot(/\.\.\.$/,"\u2026"),YI=new ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),QI=new ot(/"$/,"\u201D"),XI=new ot(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),eM=new ot(/'$/,"\u2019"),vm=[YI,QI,XI,eM];function us(n,e,t=null,r){return new ot(n,(i,o,s,a)=>{let l=t instanceof Function?t(o):t,c=i.tr.delete(s,a),u=c.doc.resolve(s),d=u.blockRange(),f=d&&Xn(d,e,l);if(!f)return null;c.wrap(d,f);let h=c.doc.resolve(s-1).nodeBefore;return h&&h.type==e&&pt(c.doc,s-1)&&(!r||r(o,h))&&c.join(s-1),c})}function Jc(n,e,t=null){return new ot(n,(r,i,o,s)=>{let a=r.doc.resolve(o),l=t instanceof Function?t(i):t;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?r.tr.delete(o,s).setBlockType(o,o,e,l):null})}var ds="ProseMirror-prompt";function Em(n){let e=document.body.appendChild(document.createElement("div"));e.className=ds;let t=f=>{e.contains(f.target)||r()};setTimeout(()=>window.addEventListener("mousedown",t),50);let r=()=>{window.removeEventListener("mousedown",t),e.parentNode&&e.parentNode.removeChild(e)},i=[];for(let f in n.fields)i.push(n.fields[f].render());let o=document.createElement("button");o.type="submit",o.className=ds+"-submit",o.textContent="OK";let s=document.createElement("button");s.type="button",s.className=ds+"-cancel",s.textContent="Cancel",s.addEventListener("click",r);let a=e.appendChild(document.createElement("form"));n.title&&(a.appendChild(document.createElement("h5")).textContent=n.title),i.forEach(f=>{a.appendChild(document.createElement("div")).appendChild(f)});let l=a.appendChild(document.createElement("div"));l.className=ds+"-buttons",l.appendChild(o),l.appendChild(document.createTextNode(" ")),l.appendChild(s);let c=e.getBoundingClientRect();e.style.top=(window.innerHeight-c.height)/2+"px",e.style.left=(window.innerWidth-c.width)/2+"px";let u=()=>{let f=tM(n.fields,i);f&&(r(),n.callback(f))};a.addEventListener("submit",f=>{f.preventDefault(),u()}),a.addEventListener("keydown",f=>{f.keyCode==27?(f.preventDefault(),r()):f.keyCode==13&&!(f.ctrlKey||f.metaKey||f.shiftKey)?(f.preventDefault(),u()):f.keyCode==9&&window.setTimeout(()=>{e.contains(document.activeElement)||r()},500)});let d=a.elements[0];d&&d.focus()}function tM(n,e){let t=Object.create(null),r=0;for(let i in n){let o=n[i],s=e[r++],a=o.read(s),l=o.validate(a);if(l)return nM(s,l),null;t[i]=o.clean(a)}return t}function nM(n,e){let t=n.parentNode,r=t.appendChild(document.createElement("div"));r.style.left=n.offsetLeft+n.offsetWidth+2+"px",r.style.top=n.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=e,setTimeout(()=>t.removeChild(r),1500)}var Yc=class{constructor(e){this.options=e}read(e){return e.value}validateType(e){return null}validate(e){return!e&&this.options.required?"Required field":this.validateType(e)||(this.options.validate?this.options.validate(e):null)}clean(e){return this.options.clean?this.options.clean(e):e}},Sn=class extends Yc{render(){let e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e}};function bm(n,e){let t=n.selection.$from;for(let r=t.depth;r>=0;r--){let i=t.index(r);if(t.node(r).canReplaceWith(i,i,e))return!0}return!1}function rM(n){return new Ee({title:"Insert image",label:"Image",enable(e){return bm(e,n)},run(e,t,r){let{from:i,to:o}=e.selection,s=null;e.selection instanceof w&&e.selection.node.type==n&&(s=e.selection.node.attrs),Em({title:"Insert image",fields:{src:new Sn({label:"Location",required:!0,value:s&&s.src}),title:new Sn({label:"Title",value:s&&s.title}),alt:new Sn({label:"Description",value:s?s.alt:e.doc.textBetween(i,o," ")})},callback(a){r.dispatch(r.state.tr.replaceSelectionWith(n.createAndFill(a))),r.focus()}})}})}function Im(n,e){let t={label:e.title,run:n};for(let r in e)t[r]=e[r];return!e.enable&&!e.select&&(t[e.enable?"enable":"select"]=r=>n(r)),new Ee(t)}function Qc(n,e){let{from:t,$from:r,to:i,empty:o}=n.selection;return o?!!e.isInSet(n.storedMarks||r.marks()):n.doc.rangeHasMark(t,i,e)}function Kc(n,e){let t={active(r){return Qc(r,n)}};for(let r in e)t[r]=e[r];return Im(Ct(n),t)}function iM(n){return new Ee({title:"Add or remove link",icon:xe.link,active(e){return Qc(e,n)},enable(e){return!e.selection.empty},run(e,t,r){if(Qc(e,n))return Ct(n)(e,t),!0;Em({title:"Create a link",fields:{href:new Sn({label:"Link target",required:!0}),title:new Sn({label:"Title"})},callback(i){Ct(n,i)(r.state,r.dispatch),r.focus()}})}})}function wm(n,e){return Im(cs(n,e.attrs),e)}function oM(n){let e={},t;(t=n.marks.strong)&&(e.toggleStrong=Kc(t,{title:"Toggle strong style",icon:xe.strong})),(t=n.marks.em)&&(e.toggleEm=Kc(t,{title:"Toggle emphasis",icon:xe.em})),(t=n.marks.code)&&(e.toggleCode=Kc(t,{title:"Toggle code font",icon:xe.code})),(t=n.marks.link)&&(e.toggleLink=iM(t));let r;if((r=n.nodes.image)&&(e.insertImage=rM(r)),(r=n.nodes.bullet_list)&&(e.wrapBulletList=wm(r,{title:"Wrap in bullet list",icon:xe.bulletList})),(r=n.nodes.ordered_list)&&(e.wrapOrderedList=wm(r,{title:"Wrap in ordered list",icon:xe.orderedList})),(r=n.nodes.blockquote)&&(e.wrapBlockQuote=cm(r,{title:"Wrap in block quote",icon:xe.blockquote})),(r=n.nodes.paragraph)&&(e.makeParagraph=ls(r,{title:"Change to paragraph",label:"Plain"})),(r=n.nodes.code_block)&&(e.makeCodeBlock=ls(r,{title:"Change to code block",label:"Code"})),r=n.nodes.heading)for(let o=1;o<=10;o++)e["makeHead"+o]=ls(r,{title:"Change to heading "+o,label:"Level "+o,attrs:{level:o}});if(r=n.nodes.horizontal_rule){let o=r;e.insertHorizontalRule=new Ee({title:"Insert horizontal rule",label:"Horizontal rule",enable(s){return bm(s,o)},run(s,a){a(s.tr.replaceSelectionWith(o.create()))}})}let i=o=>o.filter(s=>s);return e.insertMenu=new ci(i([e.insertImage,e.insertHorizontalRule]),{label:"Insert"}),e.typeMenu=new ci(i([e.makeParagraph,e.makeCodeBlock,e.makeHead1&&new as(i([e.makeHead1,e.makeHead2,e.makeHead3,e.makeHead4,e.makeHead5,e.makeHead6]),{label:"Heading"})]),{label:"Type..."}),e.inlineMenu=[i([e.toggleStrong,e.toggleEm,e.toggleCode,e.toggleLink])],e.blockMenu=[i([e.wrapBulletList,e.wrapOrderedList,e.wrapBlockQuote,im,om,sm])],e.fullMenu=e.inlineMenu.concat([[e.insertMenu,e.typeMenu]],[[am,lm]],e.blockMenu),e}var Cm=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function sM(n,e){let t={},r;function i(o,s){if(e){let a=e[o];if(a===!1)return;a&&(o=a)}t[o]=s}if(i("Mod-z",ar),i("Shift-Mod-z",Mn),i("Backspace",mm),Cm||i("Mod-y",Mn),i("Alt-ArrowUp",ti),i("Alt-ArrowDown",Wg),i("Mod-BracketLeft",ni),i("Escape",ri),(r=n.marks.strong)&&(i("Mod-b",Ct(r)),i("Mod-B",Ct(r))),(r=n.marks.em)&&(i("Mod-i",Ct(r)),i("Mod-I",Ct(r))),(r=n.marks.code)&&i("Mod-`",Ct(r)),(r=n.nodes.bullet_list)&&i("Shift-Ctrl-8",cs(r)),(r=n.nodes.ordered_list)&&i("Shift-Ctrl-9",cs(r)),(r=n.nodes.blockquote)&&i("Ctrl->",ii(r)),r=n.nodes.hard_break){let o=r,s=oi(zc,(a,l)=>(l&&l(a.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0));i("Mod-Enter",s),i("Shift-Enter",s),Cm&&i("Ctrl-Enter",s)}if((r=n.nodes.list_item)&&(i("Enter",dm(r)),i("Mod-[",fm(r)),i("Mod-]",hm(r))),(r=n.nodes.paragraph)&&i("Shift-Ctrl-0",cr(r)),(r=n.nodes.code_block)&&i("Shift-Ctrl-\\",cr(r)),r=n.nodes.heading)for(let o=1;o<=6;o++)i("Shift-Ctrl-"+o,cr(r,{level:o}));if(r=n.nodes.horizontal_rule){let o=r;i("Mod-_",(s,a)=>(a&&a(s.tr.replaceSelectionWith(o.create()).scrollIntoView()),!0))}return t}function aM(n){return us(/^\s*>\s$/,n)}function lM(n){return us(/^(\d+)\.\s$/,n,e=>({order:+e[1]}),(e,t)=>t.childCount+t.attrs.order==+e[1])}function cM(n){return us(/^\s*([-+*])\s$/,n)}function uM(n){return Jc(/^```$/,n)}function dM(n,e){return Jc(new RegExp("^(#{1,"+e+"})\\s$"),n,t=>({level:t[1].length}))}function fM(n){let e=vm.concat(Dm,ym),t;return(t=n.nodes.blockquote)&&e.push(aM(t)),(t=n.nodes.ordered_list)&&e.push(lM(t)),(t=n.nodes.bullet_list)&&e.push(cM(t)),(t=n.nodes.code_block)&&e.push(uM(t)),(t=n.nodes.heading)&&e.push(dM(t,6)),gm({rules:e})}function Mm(n){let e=[fM(n.schema),ei(sM(n.schema,n.mapKeys)),ei(Kg),Yg(),Qg()];return n.menuBar!==!1&&e.push(um({floating:n.floatingMenu!==!1,content:n.menuContent||oM(n.schema).fullMenu})),n.history!==!1&&e.push(Hg()),e.concat(new z({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}function Sm(n,e,t){let r=document.querySelector("#content");if(!r)throw new Error("Content element not found");return new qo(n,{state:Ro.create({doc:dn.fromSchema(Xo).parse(r),schema:Xo,plugins:[...Mm({schema:Xo}),ei({"Mod-[":(i,o)=>{let{selection:s}=i,a=s.$from.node();if(a.type.name!=="heading")return!1;let l=a.attrs.level;return l>=6?l=1:l+=1,o?.(i.tr.setNodeMarkup(s.$from.before(),null,X(j({},a.attrs),{level:l}))),!0}}),...t]}),nodeViews:e})}var xm=(()=>{class n{constructor(t){this.el=t}get context(){return this.provider?.service?.pluginViewContext?.[this.key]}get view(){return this.provider?.service?.pluginViewContext?.[this.key]?.view}get state(){return this.provider?.service?.pluginViewContext?.[this.key]?.view?.state}get prevState(){return this.provider?.service?.pluginViewContext?.[this.key]?.prevState}get container(){return this.el.nativeElement}get parentView(){return this.view.dom.parentElement}get pluginView(){return null}static{this.\u0275fac=function(r){return new(r||n)($(De))}}static{this.\u0275dir=He({type:n,selectors:[["ng-prosemirror-plugin"]],inputs:{key:"key",provider:"provider"},standalone:!0})}}return n})();var Nm=(()=>{class n extends xm{get size(){return this.state?.doc?.nodeSize}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xe(n)))(i||n)}})()}static{this.\u0275cmp=me({type:n,selectors:[["size"]],standalone:!0,features:[ze,ve],decls:2,vars:1,template:function(r,i){r&1&&(ke(0,"div"),on(1),Oe()),r&2&&(Zn(),uo("Size for document: ",i.size,""))},encapsulation:2})}}return n})();var hM=["contentRef"],fs=(()=>{class n{constructor(t){this.el=t,this.contentRef=null}get context(){return this.provider?.service?.nodeViewContext?.[this.key]}get view(){return this.context?.view}get getPos(){return this.context?.getPos}get setAttrs(){return this.context?.setAttrs}get node(){return this.context?.node}get selected(){return this.context?.selected}get decorations(){return this.context?.decorations}get innerDecorations(){return this.context?.innerDecorations}get parentView(){return this.provider.service.nodeView?.[this.key].dom}get container(){return(this.contentRef||this.el).nativeElement}static{this.\u0275fac=function(r){return new(r||n)($(De))}}static{this.\u0275dir=He({type:n,selectors:[["ng-prosemirror-node"]],viewQuery:function(r,i){if(r&1&&co(hM,7),r&2){let o;Jn(o=Kn())&&(i.contentRef=o.first)}},inputs:{key:"key",provider:"provider"},standalone:!0})}}return n})();var Tm=(()=>{class n extends fs{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xe(n)))(i||n)}})()}static{this.\u0275cmp=me({type:n,selectors:[["paragraph"]],standalone:!0,features:[ze,ve],decls:2,vars:2,consts:[["contentRef",""],["role","presentation"]],template:function(r,i){r&1&&rn(0,"div",1,0),r&2&&Cl("selected",i.selected)},styles:["[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{outline:blue solid 1px}"]})}}return n})();var Am=(()=>{class n{constructor(t){this.el=t}get context(){return this.provider?.service?.widgetViewContext?.[this.key]}get view(){return this.provider?.service?.widgetViewContext?.[this.key]?.view}get getPos(){return this.provider.service.widgetViewContext?.[this.key]?.getPos}get spec(){return this.provider.service.widgetViewContext?.[this.key]?.spec}get parentView(){return this.provider.service.widgetView?.[this.key].dom}get container(){return this.el.nativeElement}static{this.\u0275fac=function(r){return new(r||n)($(De))}}static{this.\u0275dir=He({type:n,selectors:[["ng-prosemirror-widget"]],inputs:{key:"key",provider:"provider"},standalone:!0})}}return n})();var km=(()=>{class n extends Am{get level(){return this.spec?.level}get hashes(){return Array(this.level||0).fill("#").join("")}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xe(n)))(i||n)}})()}static{this.\u0275cmp=me({type:n,selectors:[["hashes"]],standalone:!0,features:[ze,ve],decls:2,vars:1,consts:[[1,"hash"]],template:function(r,i){r&1&&(ke(0,"span",0),on(1),Oe()),r&2&&(Zn(),bl(i.hashes))},styles:[".hash[_ngcontent-%COMP%]{color:#00f;margin-right:6px}"]})}}return n})();var pM=["*"],Om=(()=>{class n extends fs{get level(){return this.node?.attrs?.level}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xe(n)))(i||n)}})()}static{this.\u0275cmp=me({type:n,selectors:[["heading"]],standalone:!0,features:[ze,ve],ngContentSelectors:pM,decls:3,vars:2,consts:[["contentRef",""]],template:function(r,i){r&1&&(ao(),ke(0,"div",null,0),lo(2),Oe()),r&2&&lh("heading h"+i.level)},encapsulation:2})}}return n})();var gM=["editorRef"],_m=(()=>{class n extends Xr{ngAfterViewInit(){return hs(this,null,function*(){setTimeout(()=>{console.log("editor rendered!",this.editorRef);let t=this.editorRef.nativeElement;!t||t.firstChild||Sm(this.editorRef.nativeElement,{paragraph:this.provider.createNodeView({component:Tm,as:"div",contentAs:"p"}),heading:this.provider.createNodeView({component:Om})},[new z({view:this.provider.createPluginView({component:Nm})}),new z({props:{decorations:r=>{let i=this.provider.createWidgetView({as:"i",component:km}),{$from:o}=r.selection,s=o.node();if(s.type.name!=="heading")return Y.empty;let a=i(o.before()+1,{side:-1,level:s.attrs.level||0});return Y.create(r.doc,[a])}}})])})})}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Xe(n)))(i||n)}})()}static{this.\u0275cmp=me({type:n,selectors:[["editor"]],viewQuery:function(r,i){if(r&1&&co(gM,5),r&2){let o;Jn(o=Kn())&&(i.editorRef=o.first)}},standalone:!0,features:[fo([{provide:Xr,useExisting:Zi(()=>n)}]),ze,ve],decls:2,vars:0,consts:[["editorRef",""],[1,"editor"]],template:function(r,i){r&1&&rn(0,"div",1,0)},styles:[".editor[_ngcontent-%COMP%]{background:#fff;color:#000;background-clip:padding-box;border-radius:4px;border:2px solid rgba(0,0,0,.2);padding:5px 0;margin-bottom:23px;position:relative}.ProseMirror[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:first-child, .ProseMirror[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]:first-child{margin-top:10px}.ProseMirror[_ngcontent-%COMP%]{padding:4px 8px 4px 14px;line-height:1.2;outline:none}.ProseMirror[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1em}"]})}}return n})();var Rm=(()=>{class n{constructor(t,r){this.templateRef=t,this.viewContainer=r,this._rerender=void 0}set rerender(t){t!==this._rerender&&(this._rerender=t,this.viewContainer.clear(),this.viewContainer.createEmbeddedView(this.templateRef))}static{this.\u0275fac=function(r){return new(r||n)($(Xt),$(At))}}static{this.\u0275dir=He({type:n,selectors:[["","rerender",""]],inputs:{rerender:"rerender"},standalone:!0})}}return n})();function mM(n,e){n&1&&(ke(0,"ng-prosemirror-adapter-provider"),rn(1,"editor"),Oe())}var Pm=(()=>{class n{constructor(t){this.cd=t,this.counter=0}static{this.\u0275fac=function(r){return new(r||n)($(ho))}}static{this.\u0275cmp=me({type:n,selectors:[["app-root"]],standalone:!0,features:[ve],decls:5,vars:1,consts:[[3,"click"],[4,"rerender"]],template:function(r,i){r&1&&(ke(0,"h1"),on(1,"Prosemirror Adapter Angular"),Oe(),ke(2,"button",0),El("click",function(){return i.counter=i.counter+1}),on(3,` rerender
`),Oe(),vl(4,mM,2,0,"ng-prosemirror-adapter-provider",1)),r&2&&(Zn(4),wl("rerender",i.counter))},dependencies:[xr,Pg,_m,Rm]})}}return n})();Ah(Pm).catch(n=>console.error(n));
